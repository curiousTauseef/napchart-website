{"version":3,"sources":["history.js","components/Editor/sections/Feedback.js","components/Editor/small/ColorPicker.jsx","components/common/Link.jsx","components/Editor/Editor.jsx","components/Editor/PopupVoter.js","components/Editor/Header.jsx","components/Editor/BadBrowser.jsx","components/Editor/ToolBar.jsx","components/Editor/Chart.jsx","components/Editor/sections/Export.jsx","components/Editor/sections/Info.jsx","components/Editor/small/Shapes.jsx","components/Editor/small/SuperLanes.jsx","components/Editor/small/SelectedElement.jsx","components/Editor/sections/Controls.jsx","components/Editor/small/Lanes.jsx","components/Editor/sections/Polyphasic.jsx","server.js","components/Intro/Intro.jsx","components/routes.jsx","components/App.jsx","index.js","components/common/Logo.jsx"],"names":["createBrowserHistory","Feedback","useState","sent","setSent","value","setValue","email","setEmail","id","setId","emailSent","setEmailSent","className","type","onChange","a","target","onClick","tab","console","log","server","addEmailToFeedback","sendFeedback","idFromServer","colors","red","blue","brown","green","gray","yellow","purple","pink","ColorPicker","props","state","panelOpen","dom","Object","keys","map","color","classNames","active","activeColor","key","bind","viewBox","cx","cy","r","fill","React","Component","e","aNewTab","metaKey","ctrlKey","anExternalLink","href","startsWith","preventDefault","history","push","style","this","children","myTheme","global","brand","App","slideSidebarMobile","setState","changeSection","i","currentSection","setGlobalNapchart","napchart","setMetaInfo","title","description","somethingUpdate","forceUpdate","loadingFinish","loading","save","chartid","data","err","_notify","addNotification","message","level","onSave","window","location","changeTitle","event","changeDescription","setNumberOfLanes","lanes","getAmpm","cookiePref","Cookies","get","eval","date","Date","UTC","dateString","toLocaleTimeString","match","toString","setAmpm","ampm","set","getInitialSection","includes","maybeVote","pathname","length","substring","url","origin","showPopup","sections","element","text","theme","onClose","ref","notificationSystem","name","content","property","c","section","onUpdate","onLoading","onLoadingFinish","setTimeout","localStorage","getItem","setItem","setOptions","shuffle","PopupVoter","provider","setProvider","other","setOther","onClickOutside","pad","vertical","direction","checked","disabled","marginRight","marginBottom","htmlFor","placeholder","width","justify","label","primary","Votes","Parse","extend","query","Query","providerSuggestion","equalTo","find","results","votes","then","vote","error","increment","editTitle","editingTitle","editTitleOff","focusField","input","focus","setSelectionRange","white","height","whiteBG","onBlur","BadBrowser","display","changeColor","selectedElement","config","defaultColor","back","canIGoBack","forward","canIGoForward","Chart","handleResize","updateDimensions","callback","resizer","refs","clientWidth","clientHeight","uuid","v4","initializeChart","addEventListener","removeEventListener","blurClass","canvas","ctx","getContext","loadChart","Napchart","init","responsive","oncontextmenu","stopPropagation","metaInfo","userJustSaved","cleanUrl","split","replaceState","document","changeAmpm","ampmChanged","shapeButtons","shape","classes","changeShape","duration","laneIndex","helpers","minutes","elements","reduce","lane","start","end","minutesToReadable","laneIndexes","index","laneConfig","getLaneConfig","toggleLockLane","locked","deleteLane","addLane","colorTag","tagObj","colorTags","t","tag","changeColorTag","selected","deleteElement","isTouchUser","forceFocusSelected","Controls","feedback","feedbacksend","afterfeedback","Lanes","laneButtons","disabledLane","button","napchartDontLoseFocus","clickLane","activeLaneConfig","Polyphasic","calculateDuration","schedule","changeSchedule","sleepLane","emptyLane","initAndAddElements","add","eol","setSelected","setLane","sampleSchedules","initialize","serverURL","cb","Cloud","run","chartData","response","catch","hm","loadFinish","chart","feedbackId","Logo","noInteraction","logoText","Link","src","poster","autoPlay","loop","muted","routes","path","component","Editor","params","matchURI","uri","toRegex","exec","create","undefined","resolve","context","route","result","Error","status","Router","currentPath","router","listen","render","getElementById","spinLoad","hasStartedSpinning","shouldIContinue","continueSpin","endSpin","startSpin","spin","easingEffects","easeInSine","linear","easeOutSine","fontSize","dark","drawFace","interaction","forEach","initialStart","initialEnd","easingEffect","animateFromDuration","animateToDuration","now","step","progress","Math","min","newElements","sizeAnimate","thisDuration","setElements","requestAnimationFrame","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","cos","PI","sin","easeInOutSine","easeInExpo","pow","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","easeInElastic","s","p","abs","asin","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce"],"mappings":"4HAAA,aAIeA,mB,qECkEAC,IAnEE,WAAO,IAAD,EACGC,oBAAS,GADZ,mBACdC,EADc,KACRC,EADQ,OAEKF,mBAAS,IAFd,mBAEdG,EAFc,KAEPC,EAFO,OAGKJ,mBAAS,IAHd,mBAGdK,EAHc,KAGPC,EAHO,OAIDN,mBAAS,IAJR,mBAIdO,EAJc,KAIVC,EAJU,OAKaR,oBAAS,GALtB,mBAKdS,EALc,KAKHC,EALG,KAuBrB,OACE,oCACE,yBAAKC,UAAU,QACb,wBAAIA,UAAU,cAAd,YACCV,EACC,yBACEU,UAAU,SAETF,EACC,oDAGE,oCACJ,+GACA,2BAAOG,KAAK,OAAOT,MAAOE,EAAOQ,SAAU,SAAAC,GAAC,OAAIR,EAASQ,EAAEC,OAAOZ,UAClE,4BACEa,QAxBM,SAAAC,GAChBC,QAAQC,IAAI,OAAQZ,GAEpBa,IAAOC,mBAAmBhB,EAAOE,GAAI,WACnCW,QAAQC,IAAI,iBACZT,GAAa,OAoBLC,UAAU,gBAFZ,UAWF,oCACE,uBAAGA,UAAU,SAAb,6DAGE,8BAAUA,UAAU,iBAAiBE,SAAU,SAAAC,GAAC,OAAIV,EAASU,EAAEC,OAAOZ,UACxE,4BACEa,QAjDS,SAAAC,GACnBG,IAAOE,aAAanB,GAAO,SAACoB,GAC1BL,QAAQC,IAAI,iBAAkBI,GAC9BL,QAAQC,IAAI,iBACZjB,GAAQ,GACRM,EAAMe,OA6CEZ,UAAU,gBAFZ,a,4ICvDRa,EAAS,CACXC,IAAK,UACLC,KAAM,UACNC,MAAO,UACPC,MAAO,UACPC,KAAM,UACNC,OAAQ,UACRC,OAAQ,UACRC,KAAM,WAGaC,E,YACnB,WAAYC,GAAQ,IAAD,8BACjB,4CAAMA,KAEDC,MAAQ,CACXC,WAAW,GAJI,E,sEAQT,IAAD,OAEHC,EADcC,OAAOC,KAAKf,GACRgB,KAAI,SAAAC,GAAK,OAC7B,yBAAK9B,UAAW+B,IAAW,QAAS,wBAAyB,CAC3DC,OAAQF,GAAS,EAAKP,MAAMU,cAC1BC,IAAKJ,EAAOzB,QAAS,EAAKkB,MAAMlB,QAAQ8B,KAAK,KAAML,IACrD,yBAAKM,QAAQ,eACX,4BAAQC,GAAG,KAAKC,GAAG,KAAKC,EAAE,KAAKC,KAAM3B,EAAOiB,UAIlD,OACE,yBAAK9B,UAAU,eACZ0B,O,GAtBgCe,IAAMC,Y,iVCC7CrC,QAAU,SAACsC,GACP,IAAMC,EAAUD,EAAEE,SAAWF,EAAEG,QACzBC,EAAiB,EAAKxB,MAAMyB,KAAKC,WAAW,QAE7CL,GAAYG,IACbJ,EAAEO,iBACFC,IAAQC,KAAK,EAAK7B,MAAMyB,Q,wEAd9B,OACI,uBAAGK,MAAOC,KAAK/B,MAAM8B,MAAOrD,UAAWsD,KAAK/B,MAAMvB,UAChDgD,KAAMM,KAAK/B,MAAMyB,KAAM3C,QAASiD,KAAK/B,MAAMlB,SAAWiD,KAAKjD,SACxDiD,KAAK/B,MAAMgC,c,GANKd,IAAMC,Y,gtFCoB7Bc,QAAU,CACdC,OAAQ,CACN5C,OAAQ,CACN6C,MAAO,aAIQC,I,2BACnB,aAAYpC,OAAQ,IAAD,8KACjB,iWAAMA,QADW,MAwInBqC,mBAAqB,WACnB,MAAKC,SAAS,CACZD,oBAAqB,MAAKpC,MAAMoC,sBA1IjB,MA8InBE,cAAgB,SAACC,GACf,MAAKF,SAAS,CACZG,eAAgBD,KAhJD,MAoJnBE,kBAAoB,SAACC,GACnB,MAAKL,SAAS,CACZK,SAAUA,KAtJK,MA0JnBC,YAAc,SAACC,EAAOC,GACpB9D,QAAQC,IAAI,uBAAwB4D,EAAOC,GAC3C,MAAKR,SAAS,CACZO,QACAC,iBA9Je,MAkKnBC,gBAAkB,SAACJ,GACjB,MAAKK,eAnKY,MAsKnBC,cAAgB,WACd,MAAKX,SAAS,CACZY,SAAS,KAxKM,MA4KnBA,QAAU,WACR,MAAKZ,SAAS,CACZY,SAAS,KA9KM,MAkLnBC,KAAO,WACL,MAAKD,UACgB,MAAKlD,MAAMoD,QAChClE,wCAAOiE,KAAK,MAAKlD,MAAM0C,SAASU,KAAM,MAAKpD,MAAM4C,MAC/C,MAAK5C,MAAM6C,aAAa,SAACQ,EAAKF,GAC5B,MAAKH,gBACDK,EACF,MAAKC,QAAQC,gBAAgB,CAC3BC,QAASH,EACTI,MAAO,UAGT,MAAKC,OAAOP,OA9LD,MAoMnBO,OAAS,SAACP,GAERQ,OAAOC,SAAW,IAAMT,EAAU,QAtMjB,MAyMnBU,YAAc,SAAAC,GACZ,MAAKzB,SAAS,CACZO,MAAOkB,EAAMlF,OAAOZ,SA3ML,MA+MnB+F,kBAAoB,SAAAD,GAClB,MAAKzB,SAAS,CACZQ,YAAaiB,EAAMlF,OAAOZ,SAjNX,MAqNnBgG,iBAAmB,SAACC,GAClB,MAAKjE,MAAM0C,SAASsB,iBAAiBC,IAtNpB,MAyNnBC,QAAU,WAER,IAAMC,WAAaC,kDAAQC,IAAI,cAC/B,GAAIF,WACF,OAAOG,KAAKH,YAGd,IAAII,KAAO,IAAIC,KAAKA,KAAKC,IAAI,KAAM,GAAI,GAAI,EAAG,EAAG,IAC7CC,WAAaH,KAAKI,qBAGtB,SAAID,WAAWE,MAAM,YAAaL,KAAKM,WAAWD,MAAM,YApOvC,MA4OnBE,QAAU,SAACC,GACTX,kDAAQY,IAAI,aAAcD,GAE1B,MAAK1C,SAAS,CACZ0C,KAAMA,KAhPS,MAoPnBE,kBAAoB,WAIlB,OAAItB,OAAOC,SAASiB,WAAWK,SAAS,QACtC,MAAKC,YACE,GAGF,GA3PPpG,QAAQC,IAAI,cACZ,IAAImE,UAAU,EAHG,OAIsB,GAAnCQ,OAAOC,SAASwB,SAASC,SAC3BlC,SAAUQ,OAAOC,SAASwB,SAASE,UAAU,IAE/C,MAAKtF,MAAQ,CACX0C,UAAU,EACVO,SAAS,EACTsC,IAAK5B,OAAOC,SAAS4B,OAAS,IAC9BrC,QAASA,SACTP,MAAO,GACPC,YAAa,GACbL,eAAgB,MAAKyC,oBACrBF,KAAM,MAAKb,UACXuB,WAAW,GAhBI,M,oXAoBT,IAAD,OAEHC,EAAW,CACb,CACEC,QAAS,2DAAC,uDAAD,CACPjD,SAAUZ,KAAK9B,MAAM0C,SACrBG,YAAaf,KAAK9B,MAAM6C,YACxBkB,kBAAmBjC,KAAKiC,oBAE1B6B,KAAM,QACNhD,MAAO,kBAET,CACE+C,QAAS,2DAAC,qDAAD,CACPJ,IAAKzD,KAAK9B,MAAMuF,IAChBpC,QAASrB,KAAK9B,MAAMmD,UAEtByC,KAAM,QACNhD,MAAO,oBAET,CACE+C,QAAS,2DAAC,yDAAD,CAAYjD,SAAUZ,KAAK9B,MAAM0C,WAC1CkD,KAAM,QACNhD,MAAO,oBAET,CACE+C,QAAS,2DAAC,mDAAD,CAAMZ,KAAMjD,KAAK9B,MAAM+E,KAAMD,QAAShD,KAAKgD,UACpDc,KAAM,QACNhD,MAAO,UAKX,OACE,2DAAC,wCAAD,CAASiD,MAAO7D,SACd,kEAAKxD,UAAU,UACZsD,KAAK9B,MAAMyF,WACV,2DAAC,2CAAD,CAAYK,QAAS,WACnB/G,QAAQC,IAAI,WACZ,EAAKqD,SAAS,CACZoD,WAAW,OAIjB,2DAAC,+CAAD,MACA,2DAAC,kEAAD,CAAoBM,IAAK,SAACC,GAAD,OAAwB,EAAK1C,QAAU0C,KAChE,2DAAC,kDAAD,KACGlE,KAAK9B,MAAM6C,YAAYwC,QAAU,mEAAMY,KAAK,cAAcC,QAASpE,KAAK9B,MAAM6C,cAC/E,mEAAMoD,KAAK,gBAAgBC,QAAO,8DAAyDpE,KAAK9B,MAAMmD,QAApE,wCAClC,mEAAMgD,SAAS,WAAWD,QAAO,8DAAyDpE,KAAK9B,MAAMmD,QAApE,wCACjC,mEAAMgD,SAAS,iBAAiBD,QAAQ,QACxC,mEAAMC,SAAS,kBAAkBD,QAAQ,QACxCpE,KAAK9B,MAAM4C,MAAMyC,QAAU,kFAAWvD,KAAK9B,MAAM4C,MAAtB,iBAE9B,kEAAKpE,UAAW4H,kDAAE,OAAQ,CAAEhE,mBAAoBN,KAAK9B,MAAMoC,sBACzD,kEAAK5D,UAAU,WACb,2DAAC,2CAAD,CACEoE,MAAOd,KAAK9B,MAAM4C,MAClBiB,YAAa/B,KAAK+B,YAClBV,QAASrB,KAAK9B,MAAMmD,QACpBD,KAAMpB,KAAKoB,KACXD,QAASnB,KAAK9B,MAAMiD,UAItB,kEAAKzE,UAAU,kBACb,kEAAKA,UAAU,YACb,kEAAKA,UAAU,MACZkH,EAASrF,KAAI,SAACgG,EAAS9D,GAAV,OACZ,qEAAQ1D,QAAS,EAAKyD,cAAc3B,KAAK,KAAM4B,GAAI7B,IAAK6B,EACtD/D,UAAW4H,kDAAE,YAAa,CAAE,OAAW7D,GAAK,EAAKvC,MAAMwC,kBACtD6D,EAAQT,UAIf,kEAAKpH,UAAU,UAIjB,kEAAKA,UAAU,aACb,2DAAC,6CAAD,CAASkE,SAAUZ,KAAK9B,MAAM0C,SAAUE,MAAO8C,EAAS5D,KAAK9B,MAAMwC,gBAAgBI,QACnF,kEAAKpE,UAAU,eAEZkH,EAAS5D,KAAK9B,MAAMwC,gBAAgBmD,YAM7C,kEAAKnH,UAAU,QACb,2DAAC,2CAAD,CACEkE,SAAUZ,KAAK9B,MAAM0C,SACrB4D,SAAUxE,KAAKgB,gBACfH,YAAab,KAAKa,YAClBF,kBAAmBX,KAAKW,kBACxB8D,UAAWzE,KAAKmB,QAASuD,gBAAiB1E,KAAKkB,cAC/C+B,KAAMjD,KAAK9B,MAAM+E,SAKtBjD,KAAK9B,MAAMoC,oBACV,qEAAQ5D,UAAU,uCAAuCK,QAASiD,KAAKM,oBAAvE,WAIAN,KAAK9B,MAAMoC,oBACX,qEAAQ5D,UAAU,wCAAwCK,QAASiD,KAAKM,oBAAxE,c,kCAiIG,IAAD,OACVqE,YAAW,WACNC,aAAaC,QAAQ,eAGtB,EAAKtE,SAAS,CACZoD,WAAW,IAEb1G,QAAQC,IAAI,oBACZ0H,aAAaE,QAAQ,aAAa,MAEnC,S,KA5Q0B3F,6CAAMC,Y,yLChBjC2F,E,MAAaC,GAAQ,CACzB,kCACA,wBACA,4BA4GaC,IA7FI,SAAC,GAAiB,IAAfjB,EAAc,EAAdA,QACpB/G,QAAQC,IAAI,SADsB,MAEFiC,IAAMpD,SAASgJ,EAAW,IAFxB,mBAE3BG,EAF2B,KAEjBC,EAFiB,OAGRhG,IAAMpD,SAAS,IAHP,mBAG3BqJ,EAH2B,KAGpBC,EAHoB,KAIlC,OACE,kBAAC,IAAD,CAAOC,eAAgBtB,GACrB,kBAAC,IAAD,CAAKuB,IAAI,SACP,kBAAC,IAAD,YACM,wDADN,2BAGA,kBAAC,IAAD,CAAKA,IAAK,CAAEC,SAAU,UACpB,kBAAC,IAAD,gCAC0B,uDAD1B,6BAEwB,uCAFxB,8BAKF,kBAAC,IAAD,CAAKD,IAAI,SACN,sBAAIR,GAAJ,CAAgB,UAASxG,KAAI,SAAAU,GAAC,OAC7B,kBAAC,IAAD,CACEsG,IAAK,CAAEC,SAAU,SACjBC,UAAU,MACV1I,QAAS,WACPoI,EAAYlG,KAGd,kBAAC,cAAD,CACEyG,QAASR,GAAYjG,EACrBkF,KAAMlF,EACN/C,MAAO+C,EACPL,IAAKK,EACL0G,UAAU,EACV/I,SAAU,SAAAoF,GACR/E,QAAQC,IAAI,QACZiI,EAAYlG,IAEdc,MAAO,CACL6F,YAAa,GACbC,aAAc,KAGlB,2BAAOC,QAAS7G,EAAGvC,UAAU,uBAC1BuC,OAIM,SAAZiG,GACC,kBAAC,IAAD,CACEa,YAAY,iBACZ7J,MAAOkJ,EACPxI,SAAU,SAAAoF,GAAK,OAAIqD,EAASrD,EAAMlF,OAAOZ,WAI/C,kBAAC,IAAD,CAAK8J,MAAM,OAAOP,UAAU,MAAMQ,QAAQ,WACxC,kBAAC,IAAD,CAAQC,MAAM,SAASnJ,QAASiH,IAChC,kBAAC,IAAD,CACEkC,MAAM,OACNC,SAAO,EACPpJ,QAAO,sBAAE,kCAAAF,EAAA,6DACDuJ,EAAQC,IAAMhI,OAAOiI,OAAO,SAE5BC,EAAQ,IAAIF,IAAMG,MAAMJ,GAE9BpC,IAEMyC,EAAiC,SAAZvB,EAAsBE,EAAQF,EAEzDqB,EAAMG,QAAQ,WAAYD,GATnB,SAUeF,EAAMI,OAVrB,OAUDC,EAVC,OAWP3J,QAAQC,IAAI,YAAa0J,GAEJ,GAAlBA,EAAQrD,QACI,IAAI6C,GACZhF,KAAK,CAAE8D,SAAUuB,EAAoBI,MAAO,IAAKC,MACpD,SAAAC,GACE9J,QAAQC,IAAI6J,MAEd,SAAAC,OAIFJ,EAAQ,GAAGK,UAAU,SAAS7F,OAvBzB,mD,kKCnFnB,WAAYnD,GAAQ,IAAD,8BACjB,4CAAMA,KA8CRiJ,UAAY,WACV,EAAK3G,SAAS,CACZ4G,cAAc,KAjDC,EAqDnBC,aAAe,WACb,EAAK7G,SAAS,CACZ4G,cAAc,KAvDC,EA2DnBE,WAAa,SAACC,GACZ,GAAKA,EAAL,CAGA,IAAM/D,EAAS+D,EAAMpL,MAAMqH,OAC3B+D,EAAMC,QACND,EAAME,kBAAkBjE,EAAQA,KA9DhC,EAAKrF,MAAQ,CACXiJ,cAAc,GAJC,E,sEASjB,OACE,4BAAQzK,UAAU,0BAChB,yBAAKA,UAAU,cACb,uBAAGgD,KAAK,QACN,kBAAC,IAAD,CAAMhD,UAAU,wBAAwB+K,OAAK,EAACC,OAAO,KAAKvG,QAASnB,KAAK/B,MAAMkD,QAASwG,SAAO,KAEhG,yBAAKjL,UAAU,mBACb,yBAAKA,UAAU,cACZsD,KAAK9B,MAAMiJ,cACV,2BAAOxK,KAAK,OAAOoJ,YAAY,WAC7B9B,IAAKjE,KAAKqH,WACVO,OAAQ5H,KAAKoH,aACbxK,SAAUoD,KAAK/B,MAAM8D,YACrB7F,MAAO8D,KAAK/B,MAAM6C,SAEpBd,KAAK9B,MAAMiJ,cAAgBnH,KAAK/B,MAAMoD,SACtC,wBAAItE,QAASiD,KAAKkH,WACflH,KAAK/B,MAAM6C,OAAS,aAGvBd,KAAK9B,MAAMiJ,eAAiBnH,KAAK/B,MAAMoD,SACvC,gDAQR,yBAAK3E,UAAU,eAEb,uBAAGK,QAASiD,KAAK/B,MAAMmD,KAAM1E,UAAW4H,IAAE,6BAA8B,CAAC,aAActE,KAAK/B,MAAMkD,WAAlG,c,GAzCmBhC,IAAMC,Y,iCCNnC,oBAceyI,IAZI,SAAC,GAAD,EAAG1D,KAAH,OACf,6BAASpE,MAAO,CAAC+H,QAAQ,QAASpL,UAAU,wCACxC,yBAAKA,UAAU,aACX,yBAAKA,UAAU,+BACX,wBAAIA,UAAU,SAAd,kBACA,wBAAIA,UAAU,YAAd,4DACA,wBAAIA,UAAU,YAAW,uBAAGgD,KAAK,8BAA8BhD,UAAU,UAAhD,6B,yICJvC,WAAYuB,GAAQ,IAAD,8BACjB,4CAAMA,KA4CR8J,YAAc,SAACvJ,GACb,IAAIoC,EAAW,EAAK3C,MAAM2C,SAC1BA,EAASmH,YAAY,EAAK9J,MAAM2C,SAASoH,gBAAiBxJ,GAC1DoC,EAASqH,OAAOC,aAAe1J,EAC/B,EAAKyC,eA9CL,EAAK/C,MAAQ,GAHI,E,sEAOT,IACF0C,EAAaZ,KAAK/B,MAAlB2C,SACN,OAAKA,EAKH,yBAAKlE,UAAU,WACb,yBAAKA,UAAU,mBACb,yBAAKA,UAAU,eAEf,yBAAKA,UAAU,gBACb,yBAAKA,UAAU,cACb,wBAAIA,UAAU,+BAA+BsD,KAAK/B,MAAM6C,SAG5D,yBAAKpE,UAAU,eACb,yBAAKA,UAAU,cACb,4BACEK,QAAS6D,EAASf,QAAQsI,KAAKtJ,KAAK+B,GACpClE,UAAU,sCACViJ,UAAW/E,EAASf,QAAQuI,aAC5BtH,MAAO,QAAUF,EAASf,QAAQuI,cAJpC,SAOF,yBAAK1L,UAAU,cACb,4BACEK,QAAS6D,EAASf,QAAQwI,QAAQxJ,KAAK+B,GACvClE,UAAU,sCACViJ,UAAW/E,EAASf,QAAQyI,gBAC5BxH,MAAO,QAAUF,EAASf,QAAQyI,iBAJpC,YAvBD,S,GAXgBnJ,IAAMC,Y,uKCGdmJ,E,YACnB,WAAYtK,GAAQ,IAAD,8BACjB,4CAAMA,KAsCRuK,aAAe,WACb,EAAKC,kBAAiB,kBACpB,EAAKxK,MAAM2C,SAAS6H,uBAzCL,EA6CnBA,iBAAmB,SAACC,GAClB,IAAIC,EAAU,EAAKC,KAAKD,QACxB,EAAKpI,SAAS,CACZyF,MAAO2C,EAAQE,YACfnB,OAAQiB,EAAQG,cACfJ,IAhDH,EAAKxK,MAAQ,CACX5B,GAAIyM,IAAKC,MAHM,E,iFAOE,IAAD,OACJhJ,KAAK4I,KAAKD,QAExB3I,KAAKyI,kBAAiB,kBACpB,EAAKQ,qBAGPpH,OAAOqH,iBAAiB,SAAUlJ,KAAKwI,gB,6CAIvC3G,OAAOsH,oBAAoB,SAAUnJ,KAAKwI,gB,4CAI1C,OAAO,I,+BAIP,IAAIY,EAAY,GAIhB,OAHIpJ,KAAK/B,MAAMkD,UACbiI,EAAY,QAGZ,yBAAK1M,UAAU,QAAQuH,IAAI,WACzB,4BAAQvH,UAAW,UAAY0M,EAAWpD,MAAOhG,KAAK9B,MAAM8H,MAAO0B,OAAQ1H,KAAK9B,MAAMwJ,OAAQzD,IAAKjE,KAAK9B,MAAM5B,IAA9G,c,wCAqBa,IAAD,OACZ+M,EAASrJ,KAAK4I,KAAK5I,KAAK9B,MAAM5B,IAC9BgN,EAAMD,EAAOE,WAAW,MAG5BpM,IAAOqM,UAAUxJ,KAAK/B,MAAMwG,UAAWzE,KAAK/B,MAAMyG,iBAAiB,SAACpD,GAGlE,IAAIV,EAAW6I,IAASC,KAAKJ,EAAKhI,EAAM,CACtCqI,YAAY,EACZ1G,KAAM,EAAKhF,MAAMgF,OAGnBrC,EAAS4D,SAAW,WAClB,EAAKvG,MAAMuG,YAIb3C,OAAOjB,SAAWA,EAElByI,EAAOO,cAAgB,SAAU5H,GAG/B,OAFAA,EAAMpC,iBACNoC,EAAM6H,mBACC,GAGT,EAAK5L,MAAM0C,kBAAkBC,GAEzBvC,OAAOC,KAAKgD,GAAMiC,SACpBtG,QAAQC,IAAI,SAAUoE,GACtB,EAAKrD,MAAM4C,YAAYS,EAAKwI,SAAShJ,MAAMQ,EAAKwI,SAAS/I,qB,GApF9B5B,IAAMC,Y,wUCwCvC2K,cAAgB,SAACzC,GAEf,IAAM7D,EAAM5B,OAAOC,SAASiB,WAC5B,GAAIU,EAAIL,SAAS,OAAQ,CACvBkE,EAAMC,QACND,EAAME,kBAAkBF,EAAMpL,MAAMqH,OAAQ+D,EAAMpL,MAAMqH,QAGxD,IAAMyG,EAAWvG,EAAIwG,MAAM,KAAK,GAAGA,MAAM,KAAK,GAG9C,OAFApI,OAAOhC,QAAQqK,aAAa,GAAIC,SAASrJ,MAAOkJ,IAEzC,I,wEAnDT,OACE,yBAAKtN,UAAU,WAEXsD,KAAK/B,MAAMoD,SACX,+DAEDrB,KAAK/B,MAAMoD,SACV,6BACE,yBAAK3E,UAAU,SACb,2BAAOA,UAAU,SAAjB,OACA,yBAAKA,UAAU,WACb,2BAAOE,SAAU,aAAWqH,IAAKjE,KAAK+J,cAAerN,UAAU,QAAQC,KAAK,OAAOT,MAAO8D,KAAK/B,MAAMwF,IAAMzD,KAAK/B,MAAMoD,YAG1H,yBAAK3E,UAAU,SACb,2BAAOA,UAAU,SAAjB,SACA,yBAAKA,UAAU,WACb,uBAAGgD,KAAM,4EAA8EM,KAAK/B,MAAMoD,SAAlG,0BAIJ,yBAAK3E,UAAU,SACb,2BAAOA,UAAU,SAAjB,SACA,yBAAKA,UAAU,WAAf,8BAC6B,uBAAGI,OAAO,SAAS4C,KAAK,yCAAxB,sBAI/B,yBAAKhD,UAAU,SACb,2BAAOA,UAAU,SAAjB,OACA,yBAAKA,UAAU,mB,GAjCAyC,IAAMC,Y,yJCIjC,WAAYnB,GAAQ,IAAD,8BACjB,4CAAMA,KAgERmM,WAAa,SAACnH,GACZhG,QAAQC,IAAI+F,GACZ,EAAKhF,MAAM+E,QAAQC,GACnB,EAAK1C,SAAS,CACZ8J,aAAa,KAnEf,EAAKnM,MAAQ,CACXmM,aAAa,GAHE,E,sEAQjB,OACE,yBAAK3N,UAAU,QACb,yBAAKA,UAAU,QACb,yBAAKA,UAAU,SACb,sHAGF,yBAAKA,UAAU,SACb,2BAAG,mDAAH,mDAEF,yBAAKA,UAAU,SACb,2BAAG,mDAAH,kCAAkE,uCAAlE,OAAuF,iDAG3F,kBAAC,IAAD,MACA,yBAAKA,UAAU,QACf,wBAAIA,UAAU,cAAd,cACA,uBAAGA,UAAU,SAAb,uFAIA,uBAAGA,UAAU,SACX,uBACEI,OAAO,SACP4C,KAAK,iDAEL,qDACG,IANP,aASA,uBAAGhD,UAAU,SACX,uBAAGI,OAAO,SAAS4C,KAAK,yCACtB,6CACG,IAHP,cAOA,yBAAKhD,UAAU,QACb,2BAAOA,UAAU,SAAjB,eACA,yBAAKA,UAAU,WACb,2BAAOA,UAAU,SACf,2BAAOC,KAAK,QAAQwH,KAAK,SAASvH,SAAUoD,KAAKoK,WAAWvL,KAAK,MAAM,GAAO6G,QAAS1F,KAAK/B,MAAMgF,OAClG,yCAEF,2BAAOvG,UAAU,SACf,2BAAOC,KAAK,QAAQwH,KAAK,SAASvH,SAAUoD,KAAKoK,WAAWvL,KAAK,MAAM,GAAQ6G,SAAU1F,KAAK/B,MAAMgF,OACpG,4CAEDjD,KAAK9B,MAAMmM,aACV,uD,GA1DelL,IAAMC,a,u2GCFdmJ,E,YACnB,WAAYtK,GAAQ,qEACZA,I,sEAIN,IAAI2C,EAAWZ,KAAK/B,MAAM2C,SAC1B,IAAKA,EACH,OAAO,KAET,IAEI0J,EAFS,CAAC,SAAU,OAAQ,QAEN/L,KAAI,SAAAgM,GAC5B,IAAIC,EAAU,CACZ,YAAa5J,EAASU,KAAKiJ,OAASA,EACpC,aAAc3J,EAASU,KAAKiJ,OAASA,GAEvC,OACE,uBAAG7N,UAAU,UAAUkC,IAAK2L,GAC1B,4BAAQ7N,UAAW4H,IAAE,SAAU,WAAY,wBAAyBkG,GAClEzN,QAAS6D,EAAS6J,YAAY5L,KAAK+B,EAAU2J,IAE5CA,OAKT,OACE,yBAAK7N,UAAU,oCACb,yBAAKA,UAAU,cACb,yBAAKA,UAAU,yBAAf,UAGA,yBAAKA,UAAU,cACZ4N,S,GAlCsBnL,IAAMC,W,6MC8CvCsL,SAAW,SAACC,GACV,IAAMC,EAAU,EAAK3M,MAAM2C,SAASgK,QAC9BC,EAAU,EAAK5M,MAAM2C,SAASU,KAAKwJ,SAASC,QAAO,SAACF,EAAShH,GACjE,OAAIA,EAAQmH,MAAQL,EACXE,EAAUD,EAAQF,SAAS7G,EAAQoH,MAAOpH,EAAQqH,KAElDL,IAER,GACH,OAAOD,EAAQO,kBAAkBN,I,wEAvDzB,IAAD,OACHjK,EAAWZ,KAAK/B,MAAM2C,SAC1B,IAAKA,EACH,OAAO,KAIT,IADA,IAAIwK,EAAc,GACT3K,EAAI,EAAGA,EAAIG,EAASU,KAAKa,MAAO1B,IACvC2K,EAAYtL,KAAKW,GAEnB,IAAI0B,EAAQiJ,EAAY7M,KAAI,SAAC8M,GAC3B,IAAIC,EAAa1K,EAAS2K,cAAcF,GACxC,OACE,yBAAK3O,UAAU,0BAA0BkC,IAAKyM,GAC5C,yBAAK3O,UAAU,mBACb,yBAAKA,UAAU,cACb,2BAAI2O,EAAQ,EAAZ,UAAiB,EAAKX,SAASW,KAEjC,yBAAK3O,UAAU,eACb,yBAAKA,UAAU,cACb,4BACEK,QAAS6D,EAAS4K,eAAe3M,KAAK+B,EAAUyK,GAChD3O,UAAW4H,IAAE,kBAAmB,CAAE,YAAagH,EAAWG,OAAQ,UAAWH,EAAWG,UAF1F,SAIF,yBAAK/O,UAAU,cACb,4BAAQK,QAAS6D,EAAS8K,WAAW7M,KAAK+B,EAAUyK,GAClD3O,UAAU,kBACViJ,SAAiC,GAAvB/E,EAASU,KAAKa,OAF1B,iBASZ,OACE,yBAAKzF,UAAU,oBACb,uBAAGA,UAAU,oBAAb,UACA,yBAAKA,UAAU,SACZyF,GAEH,4BAAQpF,QAAS6D,EAAS+K,QAAQ9M,KAAK+B,GACrClE,UAAU,mBADZ,mB,GAzCqByC,IAAMC,W,sNCsDjCwM,SAAW,SAACpN,GACV,IACIqN,EADW,EAAK5N,MAAM2C,SACJU,KAAKwK,UAAUnF,MAAK,SAAAoF,GAAC,OAAIA,EAAEvN,OAASA,KAE1D,MAAqB,oBAAVqN,EACF,GAEAA,EAAOG,K,EAIlBjE,YAAc,SAACvJ,GACb,IAAIoC,EAAW,EAAK3C,MAAM2C,SAC1BA,EAASmH,YAAY,EAAK9J,MAAM2C,SAASoH,gBAAiBxJ,GAC1DoC,EAASqH,OAAOC,aAAe1J,EAC/B,EAAKyC,e,EAGPgL,eAAiB,SAAC5M,GAChB,IAAIuB,EAAW,EAAK3C,MAAM2C,SACtBjC,EAAciC,EAASqH,OAAOC,aAElCtH,EAASgL,SAASjN,EAAaU,EAAEvC,OAAOZ,OACxC,EAAK+E,e,wEA3EL,IAAIL,EAAWZ,KAAK/B,MAAM2C,SACtBsL,EAAWtL,EAASoH,gBAExB,GAAIpH,EAAU,CACZ,IAAIiD,EAAUjD,EAASU,KAAKwJ,SAASnE,MAAK,SAAAtH,GAAC,OAAIA,EAAE/C,IAAM4P,KACnDvN,EAAiC,oBAAXkF,EAA0BjD,EAASqH,OAAOC,aAAerE,EAAQrF,MAG3F,OACE,yBAAK9B,UAAU,mBACb,yBAAKA,UAAU,SACb,kBAACsB,EAAA,EAAD,CACEjB,QAASiD,KAAK+H,YACdpJ,YAAaA,KAGjB,yBAAKjC,UAAU,SACb,2BAAOqD,MAAO,CAAEvB,MAAOG,GAAejC,UAAU,WAAWC,KAAK,OAAOoJ,YAAapH,EAAc,KAChG/B,SAAUoD,KAAKiM,eACf/P,MAAO8D,KAAK4L,SAASjN,MAIxBuN,GACC,6BACE,yBAAKxP,UAAU,oCACb,yBAAKA,UAAU,cACb,yBAAKA,UAAU,cAAf,qBAGA,yBAAKA,UAAU,cACb,4BAAQK,QAAS6D,EAASuL,cAActN,KAAK+B,EAAUsL,GAAWxP,UAAU,gCAA5E,UACCkE,EAASwL,aACR,4BAAQrP,QAAS6D,EAASyL,mBAAoB3P,UAAU,gCAAxD,kBAehB,OAAO,S,GAlDgByC,IAAMC,W,sCCIdkN,E,2MA0CnBjP,aAAe,SAACL,GACd,IAAId,EAAQ,EAAK0M,KAAK2D,SAASrQ,MAG/BiB,IAAOE,aAAanB,GAAO,WACzBe,QAAQC,IAAI,iBACZ,EAAK0L,KAAK2D,SAASxM,MAAM+H,QAAU,OACnC,EAAKc,KAAK4D,aAAazM,MAAM+H,QAAU,OACvC,EAAKc,KAAK6D,cAAc1M,MAAM+H,QAAU,Y,wEAjDlC,IACFlH,EAAaZ,KAAK/B,MAAlB2C,SACN,OAAKA,EAIH,6BACE,6BACE,6BACE,yBAAKlE,UAAU,kBAIb,8BAAUC,KAAK,OAAOD,UAAU,cAAcqJ,YAAY,sBACxDnJ,SAAUoD,KAAK/B,MAAMgE,kBACrB/F,MAAO8D,KAAK/B,MAAM8C,eAEtB,yBAAKrE,UAAU,QACb,kBAAC,EAAD,CAAQkE,SAAUA,KAEpB,yBAAKlE,UAAU,QACb,kBAAC,EAAD,CACEkE,SAAUA,KAGd,yBAAKlE,UAAU,QACb,yBAAKA,UAAU,oBAAf,UAGA,kBAAC,EAAD,CAAiBkE,SAAUA,KAE7B,kBAAC9E,EAAA,EAAD,SA5BC,S,GAJyBsD,c,4HCJjBsN,E,iLACT,IAAD,OACH9L,EAAWZ,KAAK/B,MAAM2C,SAC1B,IAAKA,EACH,OAAO,KAIT,IADA,IAAIwK,EAAc,GACT3K,EAAI,EAAGA,EAAIG,EAASU,KAAKa,MAAO1B,IACvC2K,EAAYtL,KAAKW,GAEnB,IAAIkM,EAAcvB,EAAY7M,KAAI,SAAC8M,GACjC,IAAI1F,EAAW,EAAK1H,MAAM2O,aAAavB,GACnCb,EAAU,CACZqC,QAAQ,EACR,YAAaxB,GAAS,EAAKpN,MAAMS,OACjC,UAAW2M,GAAS,EAAKpN,MAAMS,OAC/BiH,SAAUA,EACVmH,uBAAuB,GAEzB,OACE,uBAAGpQ,UAAU,UAAUkC,IAAKyM,GAC1B,4BAAQ3O,UAAW4H,IAAEkG,GACnBzN,SAAU4I,GAAY,EAAK1H,MAAM8O,UAAUlO,KAAK,GAAIwM,GACpD1F,SAAUA,GAET0F,EAAQ,OAMX2B,EAAmBpM,EAAS2K,cAAcvL,KAAK/B,MAAMS,QAC3D,OACE,yBAAKhC,UAAU,oCACb,yBAAKA,UAAU,cACb,yBAAKA,UAAU,cAAf,SAGA,yBAAKA,UAAU,cACZiQ,GAEH,yBAAKjQ,UAAU,cACb,4BACEK,QAAS6D,EAAS4K,eAAe3M,KAAK+B,EAAUZ,KAAK/B,MAAMS,QAC3DhC,UAAW4H,IAAE,kBAAmB,CAAE,YAAa0I,EAAiBvB,OAAQ,UAAWuB,EAAiBvB,UAFtG,e,GA3CuBtM,IAAMC,W,sCCGpB6N,E,YACnB,WAAYhP,GAAQ,IAAD,8BACjB,4CAAMA,KAoERiP,kBAAoB,SAACC,GACnB,IAAIvC,EAAU,EAAK3M,MAAM2C,SAASgK,QAC5BC,EAAUsC,EAASrC,SAASC,QAAO,SAACF,EAAShH,GACjD,OAAOgH,EAAUD,EAAQF,SAAS7G,EAAQoH,MAAOpH,EAAQqH,OACxD,GACH,OAAON,EAAQO,kBAAkBN,IA1EhB,EA6EnBuC,eAAiB,SAACD,GAChB,IAAInC,EAAO,EAAK9M,MAAMmP,UAClBvC,EAAWqC,EAASrC,SAASvM,KAAI,SAAAsF,GACnC,MAAO,CACLoH,MAAOpH,EAAQoH,MACfC,IAAKrH,EAAQqH,IACbF,KAAMA,EACNxM,MAAO,EAAKN,MAAMM,UAGlBoC,EAAW,EAAK3C,MAAM2C,SAC1BA,EAAS0M,UAAUtC,GACnBpK,EAAS2M,mBAAmBzC,GAC5BlK,EAASf,QAAQ2N,IAAI,2BAGrB,IAAIC,EAAM7M,EAASU,KAAKwJ,SAASnE,MAAK,SAAAtH,GAAC,OAAIA,EAAE2L,MAAQA,KACrDpK,EAAS8M,YAAYD,EAAInR,KA9FR,EAiGnBqR,QAAU,SAAC3C,GACT,EAAKzK,SAAS,CACZ8M,UAAWrC,KAnGI,EAuGnBjD,YAAc,SAACvJ,GACb,EAAK+B,SAAS,CACZ/B,MAAOA,KAvGT,EAAKN,MAAQ,CACXmP,UAAW,EACX7O,MAAO,OAJQ,E,sEAQT,IAAD,OACP,OACE,yBAAK9B,UAAU,cACb,yBAAKA,UAAU,SAAf,qFACA,yBAAKA,UAAU,SACb,kBAAC,EAAD,CACEkE,SAAUZ,KAAK/B,MAAM2C,SACrBmM,UAAW/M,KAAK2N,QAChBjP,OAAQsB,KAAK9B,MAAMmP,UACnBT,aAAc,SAAC5B,GAAD,OAAUA,EAAO,EAAK/M,MAAM2C,SAASU,KAAKa,UAG5D,yBAAKzF,UAAU,SACb,kBAACsB,EAAA,EAAD,CACEjB,QAASiD,KAAK+H,YACdpJ,YAAaqB,KAAK9B,MAAMM,SAG5B,yBAAK9B,UAAU,eACb,uBAAGA,UAAU,iBAAb,aAoBCkR,EAAgBrP,KAAI,SAAA4O,GAAQ,OAC3B,uBAAGvO,IAAKuO,EAAShJ,KAAMzH,UAAU,cAC/BK,QAAS,EAAKqQ,eAAevO,KAAK,KAAMsO,IACxC,yBAAKzQ,UAAU,4BACb,yBAAKA,UAAU,cACb,yBAAKA,UAAU,cACb,8BAAOyQ,EAAShJ,QAGpB,yBAAKzH,UAAU,eACb,yBAAKA,UAAU,cACb,0BAAMA,UAAU,YAAY,EAAKwQ,kBAAkBC,iB,GA3D/BhO,IAAMC,Y,stBCD9CiH,IAAMwH,WACJ,2CACA,4CAEFxH,IAAMyH,UACJ,iEAIF,IAAMvF,EAAQlC,IAAMhI,OAAOiI,OAAO,SAEnB,KACblF,KAAM,SAACE,EAAMR,EAAOC,EAAagN,GACnB,IAAIxF,EAEAlC,IAAM2H,MAAMC,IAAI,cAAe,CAC7C5M,QAAS,QACTP,MAAOA,EACPC,YAAaA,EACbmN,UAAW5M,IAEVwF,MAAK,SAAAqH,GACJlR,QAAQC,IAAIiR,GACZ,IAAI9M,EAAU8M,EAAS9M,QAEvB0M,EAAG,KAAM1M,MAEV+M,OAAM,SAAAC,GACLpR,QAAQ+J,MAAM,UAAWqH,GACzBN,EAAG,qEAITvE,UAAU,WAAD,4BAAE,WAAOrI,EAASmN,EAAYP,GAA5B,uBAAAlR,EAAA,yDAELwE,GAAU,EACyB,GAAnCQ,OAAOC,SAASwB,SAASC,SAC3BlC,EAAUQ,OAAOC,SAASwB,SAASE,UAAU,IAG1CnC,EAPI,uBAQPpE,QAAQC,IAAI,+BARL,kBASA6Q,EAAG,KATH,cAYT5M,KAEMoF,EAAQ,IAAIF,IAAMG,MAAM+B,IACxB7B,QAAQ,UAAWrF,GAfhB,UAgBakF,EAAMI,OAhBnB,eAgBHC,EAhBG,OAiBT3J,QAAQC,IAAI,YAAa0J,GACnB2H,EAAQ3H,EAAQ,GACtB3J,QAAQC,MACFoE,EApBG,GAqBPhF,GAAI+E,GACDkN,EAAMhM,IAAI,aAtBN,CAuBPuH,SAAU,CACRhJ,MAAOyN,EAAMhM,IAAI,SACjBxB,YAAawN,EAAMhM,IAAI,kBAG3B+L,IA5BS,kBA8BFP,EAAGzM,IA9BD,4CAAF,uDAAC,GAiCVjE,aAAc,SAACkP,EAAUwB,GACD,GAAnBxB,EAAShJ,SAID,IADM,IAAI8C,IAAMhI,OAAOiI,OAAO,aAGtClF,KAAK,CACNmL,aACCzF,MAAK,SAAAqH,GACNlR,QAAQC,IAAIiR,GACZJ,EAAGI,EAAS7R,QAQhBc,mBAAmB,WAAD,4BAAE,WAAOhB,EAAOoS,EAAYT,GAA1B,mBAAAlR,EAAA,6DACZf,EAAW,IAAIuK,IAAMhI,OAAOiI,OAAO,aACnCC,EAAQ,IAAIF,IAAMG,MAAM1K,IACxB4K,QAAQ,WAAY8H,GAC1BvR,QAAQC,IAAI,eAAgBsR,GAJV,SAKIjI,EAAMI,OALV,OAKZC,EALY,OAMlB3J,QAAQC,IAAI,YAAa0J,GAEzBA,EAAQ,GAAG1D,IAAI,QAAS9G,GAExBwK,EAAQ,GAAGxF,OAAO0F,MAAK,SAAAqH,GACrBlR,QAAQC,IAAIiR,GACZJ,OAZgB,4CAAF,uDAAC,K,4LCjFnB,WAAY9P,GAAQ,IAAD,8BACjB,4CAAMA,KAEDC,MAAQ,GAHI,E,sEAQjB,OACE,6BACE,6BAASxB,UAAU,8CACjB,yBAAKA,UAAU,aACb,yBAAKA,UAAU,4BACb,yBAAKA,UAAU,WACb,kBAAC+R,EAAA,EAAD,CAAMC,eAAa,EAACC,SAAS,WAAWjH,OAAO,WAIrD,yBAAKhL,UAAU,aACb,kBAACkS,EAAA,EAAD,CAAMlP,KAAK,QACT,kBAAC+O,EAAA,EAAD,CAAMhH,OAAK,EAACiH,eAAa,EAACC,SAAS,YAAYjH,OAAO,UAO5D,6BAAShL,UAAU,yBACjB,yBAAKA,UAAU,aACb,yBAAKA,UAAU,aACb,yBAAKA,UAAU,WACb,yBAAKA,UAAU,4BACb,wBAAIA,UAAU,cAAd,oCAEA,2BAAOmS,IAAI,kBAAkBC,OAAO,uBAAuBC,UAAQ,EAACC,MAAI,EAACC,OAAK,SAQxF,6BAASvS,UAAU,2BACjB,yBAAKA,UAAU,aACb,yBAAKA,UAAU,aACb,yBAAKA,UAAU,WACb,yBAAKA,UAAU,kDACb,wBAAIA,UAAU,cAAd,+BACA,sGAEF,yBAAKA,UAAU,4BACb,yBAAKmS,IAAI,mBAOnB,6BAASnS,UAAU,yBACjB,yBAAKA,UAAU,aACb,yBAAKA,UAAU,aACb,yBAAKA,UAAU,eACb,yBAAKA,UAAU,kDACb,wBAAIA,UAAU,cAAd,oCACA,qJAGF,yBAAKA,UAAU,4BACb,yBAAKmS,IAAI,yBAQnB,6BAASnS,UAAU,wBACjB,yBAAKA,UAAU,aACb,yBAAKA,UAAU,+BACb,uBAAGgD,KAAK,OAAOhD,UAAU,UACvB,kBAAC+R,EAAA,EAAD,CAAM9G,SAAO,EAAC+G,eAAa,EAACC,SAAS,YAAYjH,OAAO,UAK9D,yBAAKhL,UAAU,aACb,yBAAKA,UAAU,+BACb,2BAAG,uBAAGI,OAAO,SAAS4C,KAAK,QAAO,qDAAlC,cACA,2BAAG,uBAAG5C,OAAO,SAAS4C,KAAK,QAAO,6CAAlC,cACA,+F,GA1FeP,IAAMC,WCD7B8P,EAAS,CACd,CACCC,KAAM,IACPC,UAAW,kBAAM,kBAAC,EAAD,QAEjB,CACCD,KAAM,OACNC,UAAW,kBAAM,kBAACC,EAAA,EAAD,QAElB,CACCF,KAAM,YACNC,UAAW,SAACE,GAAD,OAAY,kBAACD,EAAA,EAAD,CAAQhO,QAAS,WAI1C,SAASkO,EAASJ,EAAMK,GACvB,IAAMlR,EAAO,GAEPwE,EADU2M,IAAQN,EAAM7Q,GACRoR,KAAKF,GAC3B,IAAK1M,EAAO,OAAO,KAEnB,IADA,IAAMwM,EAASjR,OAAOsR,OAAO,MACpBlP,EAAI,EAAGA,EAAIqC,EAAMS,OAAQ9C,IACjC6O,EAAOhR,EAAKmC,EAAI,GAAG0D,WACLyL,IAAb9M,EAAMrC,GAAmBqC,EAAMrC,QAAKmP,EAEtC,OAAON,EAgBO,OAAEO,QAbjB,SAAiBC,GAAU,IAAD,uBACzB,YAAoBZ,EAApB,+CAA4B,CAAC,IAAlBa,EAAiB,QACrBP,EAAMM,EAAQ9I,MAAQ,SAAW8I,EAAQxM,SACzCgM,EAASC,EAASQ,EAAMZ,KAAMK,GACpC,GAAKF,EAAL,CACA,IAAMU,EAASD,EAAMX,UAAUE,GAC/B,GAAIU,EAAQ,OAAOA,IANK,kFAQzB,IAAMhJ,EAAQ,IAAIiJ,MAAM,aAExB,MADAjJ,EAAMkJ,OAAS,IACTlJ,ICrCcmJ,E,YACnB,WAAYlS,GAAO,IAAD,8BAChB,4CAAMA,KAEDC,MAAQ,CACXkS,YAAavQ,IAAQiC,UAJP,E,sEAUhB,OADgBuO,EAAOR,QAAQhO,OAAOC,Y,0CAInB,IAAD,OAClBjC,IAAQyQ,QAAO,SAACxO,GACd,EAAKvB,SAAS,CACZ6P,YAAatO,W,GAjBe3C,IAAMC,WCE1CmR,iBACE,kBAAC,EAAD,MACApG,SAASqG,eAAe,U,qvBCPLjI,E,YACnB,WAAYtK,GAAQ,IAAD,8BACjB,4CAAMA,KA+ERwS,SAAW,SAAC/H,GACV,EAAKnI,SAAS,CACZmQ,oBAAoB,IAGtB,IAAIC,EAAkB,SAAlBA,IACE,EAAK1S,MAAMkD,QACb,EAAKyP,aAAaD,GAElB,EAAKE,SAAQ,WACX,EAAKtQ,SAAS,CACZmQ,oBAAoB,QAM5B,EAAKI,WAAU,WACb,EAAKF,aAAaD,OAlGH,EAsGnBG,UAAY,SAACpI,GACX,EAAKqI,KAAK,IAAKC,EAAcC,WAAY,IAAK,IAAUvI,IAvGvC,EA0GnBkI,aAAe,SAAClI,GACd,EAAKqI,KAAK,IAAKC,EAAcE,OAAQ,IAAU,IAAUxI,IA3GxC,EA8GnBmI,QAAU,SAACnI,GACT,EAAKqI,KAAK,IAAKC,EAAcG,YAAa,IAAU,IAAKzI,IA7GzD,EAAKxK,MAAQ,CACX0C,UAAU,EACV8P,oBAAoB,EACpBzM,IAAK8E,IAAKC,MALK,E,iFAUjBhJ,KAAKiJ,oB,+BAIDjJ,KAAK/B,MAAMkD,UAAYnB,KAAK9B,MAAMwS,oBAAsB1Q,KAAK9B,MAAM0C,UACrEZ,KAAKyQ,WAGP,IAAI/I,EAAS1H,KAAK/B,MAAMyJ,OACxB,OACE,yBAAKhL,UAAW,iBAAmBsD,KAAK/B,MAAMvB,WAC5C,yBAAKA,UAAU,eAAeqD,MAAO,CAAEiG,MAAO0B,EAAS,OACrD,4BAAQ1B,MAAO0B,EAAQA,OAAQA,EAAQzD,IAAKjE,KAAK9B,MAAM+F,OAEzD,yBAAKvH,UAAU,QACZsD,KAAK/B,MAAM0Q,UACV,0BAAM5O,MAAO,CAAEqR,SAAU1J,EAAS,GAChChL,UAAW+B,IAAW,WAAY,CAAE4S,KAAMrR,KAAK/B,MAAM0J,WACrD3H,KAAK/B,MAAM0Q,UAGdjH,EAAS,KACR,0BAAMhL,UAAW+B,IAAW,SAAU,CAAE4S,KAAMrR,KAAK/B,MAAM0J,WAAzD,4B,wCAUR,IACI2B,EADStJ,KAAK4I,KAAK5I,KAAK9B,MAAM+F,KACjBsF,WAAW,MAExBuB,EAAW,CAAC,CACd,IAAO,IAAK,MAAS,GAAI,KAAQ,EAAG,GAAM,KAAM,KAAQ,GAAI,MAAS,MAAO,SAAY,KACvF,CACD,IAAO,IAAK,MAAS,IAAK,KAAQ,EAAG,GAAM,IAAK,KAAQ,GAAI,MAAS,QAAS,SAAY,KACzF,CACD,MAAS,IAAK,IAAO,KAAM,KAAQ,EAAG,GAAM,KAAM,KAAQ,GAAI,MAAS,QAAS,SAAY,KAC3F,CACD,MAAS,KAAM,IAAO,KAAM,KAAQ,EAAG,GAAM,KAAM,KAAQ,GAAI,MAAS,SAAU,SAAY,MAG5F9K,KAAK/B,MAAMwJ,QACbqD,EAAWA,EAASvM,KAAI,SAAAc,GAAC,YACpBA,EADoB,CAEvBb,MAAO,cAIX,IAAIoC,EAAW6I,IAASC,KAAKJ,EAAK,CAChCwB,SAAUA,EACVP,MAAO,aACPpI,MAAO,GACN,CACC2B,MAAM,EACNwN,UAAU,EACVC,aAAcvR,KAAK/B,MAAMyQ,gBAG7B9N,EAASU,KAAKwJ,SAAS0G,SAAQ,SAAA3N,GAC7BA,EAAQ4N,aAAe5N,EAAQoH,MAC/BpH,EAAQ6N,WAAa7N,EAAQqH,OAG/BlL,KAAK9B,MAAM0C,SAAWA,I,2BAqCnB8J,EAAUiH,EAAcC,EAAqBC,EAAmBnJ,GACnE,IAAI9H,EAAWZ,KAAK9B,MAAM0C,SAEtBqK,EAAQvI,KAAKoP,OAEjB,SAASC,IACP,IAAID,EAAMpP,KAAKoP,MAEf,IADIE,EAAWC,KAAKC,KAAKJ,EAAM7G,GAASP,EAAU,KAClC,EACd,OAAOhC,IAET,IAAIsJ,EAAWL,EAAaK,GAGxBG,EAAcvR,EAASU,KAAKwJ,SAASvM,KAAI,SAAAsF,GAC3C,IAEIuO,EAAc,GAAKJ,EACnBK,EAAeT,GAAuBC,EAAoBD,GAAuBI,EAEjF/G,EAAQpH,EAAQ4N,aALL,KAK+BO,EAAWI,EAEzD,OAAO,EAAP,GACKvO,EADL,CAEEoH,QACAC,IAJQD,EAAQoH,OAOpBzR,EAAS0R,YAAYH,GACjBH,EAAW,GAEbO,sBAAsBR,GAI1BA,O,GAtJ+B5S,IAAMC,WA2JrC4R,EAAgB,CAClBE,OAAQ,SAAUnF,GAChB,OAAOA,GAETyG,WAAY,SAAUzG,GACpB,OAAOA,EAAIA,GAEb0G,YAAa,SAAU1G,GACrB,OAAQ,EAAIA,GAAKA,EAAI,IAEvB2G,cAAe,SAAU3G,GACvB,OAAKA,GAAK,IAAS,EACV,GAAQA,EAAIA,GAEd,MAAaA,GAAMA,EAAI,GAAK,IAErC4G,YAAa,SAAU5G,GACrB,OAAOA,EAAIA,EAAIA,GAEjB6G,aAAc,SAAU7G,GACtB,OAAO,IAAMA,EAAIA,EAAI,EAAI,GAAKA,EAAIA,EAAI,IAExC8G,eAAgB,SAAU9G,GACxB,OAAKA,GAAK,IAAS,EACV,GAAQA,EAAIA,EAAIA,EAElB,KAAUA,GAAK,GAAKA,EAAIA,EAAI,IAErC+G,YAAa,SAAU/G,GACrB,OAAOA,EAAIA,EAAIA,EAAIA,GAErBgH,aAAc,SAAUhH,GACtB,OAAQ,IAAMA,EAAIA,EAAI,EAAI,GAAKA,EAAIA,EAAIA,EAAI,IAE7CiH,eAAgB,SAAUjH,GACxB,OAAKA,GAAK,IAAS,EACV,GAAQA,EAAIA,EAAIA,EAAIA,GAEtB,KAAWA,GAAK,GAAKA,EAAIA,EAAIA,EAAI,IAE1CkH,YAAa,SAAUlH,GACrB,OAAO,GAAKA,GAAK,GAAKA,EAAIA,EAAIA,EAAIA,GAEpCmH,aAAc,SAAUnH,GACtB,OAAO,IAAMA,EAAIA,EAAI,EAAI,GAAKA,EAAIA,EAAIA,EAAIA,EAAI,IAEhDoH,eAAgB,SAAUpH,GACxB,OAAKA,GAAK,IAAS,EACV,GAAQA,EAAIA,EAAIA,EAAIA,EAAIA,EAE1B,KAAUA,GAAK,GAAKA,EAAIA,EAAIA,EAAIA,EAAI,IAE7CkF,WAAY,SAAUlF,GACpB,OAAQ,EAAIkG,KAAKmB,IAAIrH,EAAI,GAAKkG,KAAKoB,GAAK,IAAM,GAEhDlC,YAAa,SAAUpF,GACrB,OAAO,EAAIkG,KAAKqB,IAAIvH,EAAI,GAAKkG,KAAKoB,GAAK,KAEzCE,cAAe,SAAUxH,GACvB,OAAO,IAAUkG,KAAKmB,IAAInB,KAAKoB,GAAKtH,EAAI,GAAK,IAE/CyH,WAAY,SAAUzH,GACpB,OAAc,IAANA,EAAW,EAAI,EAAIkG,KAAKwB,IAAI,EAAG,IAAM1H,EAAI,EAAI,KAEvD2H,YAAa,SAAU3H,GACrB,OAAc,IAANA,EAAW,EAAI,GAAiC,EAA3BkG,KAAKwB,IAAI,GAAI,GAAK1H,EAAI,KAErD4H,cAAe,SAAU5H,GACvB,OAAU,IAANA,EACK,EAEC,IAANA,EACK,GAEJA,GAAK,IAAS,EACV,GAAQkG,KAAKwB,IAAI,EAAG,IAAM1H,EAAI,IAEhC,IAAmC,EAAzBkG,KAAKwB,IAAI,GAAI,KAAO1H,KAEvC6H,WAAY,SAAU7H,GACpB,OAAIA,GAAK,EACAA,GAED,GAAKkG,KAAK4B,KAAK,GAAK9H,GAAK,GAAKA,GAAK,IAE7C+H,YAAa,SAAU/H,GACrB,OAAO,EAAIkG,KAAK4B,KAAK,GAAK9H,EAAIA,EAAI,EAAI,GAAKA,IAE7CgI,cAAe,SAAUhI,GACvB,OAAKA,GAAK,IAAS,GACV,IAAUkG,KAAK4B,KAAK,EAAI9H,EAAIA,GAAK,GAEnC,IAASkG,KAAK4B,KAAK,GAAK9H,GAAK,GAAKA,GAAK,IAEhDiI,cAAe,SAAUjI,GACvB,IAAIkI,EAAI,QACJC,EAAI,EACJrX,EAAI,EACR,OAAU,IAANkP,EACK,EAEQ,KAAZA,GAAK,GACD,GAEJmI,IACHA,EAAI,IAEFrX,EAAIoV,KAAKkC,IAAI,IACftX,EAAI,EACJoX,EAAIC,EAAI,GAERD,EAAIC,GAAK,EAAIjC,KAAKoB,IAAMpB,KAAKmC,KAAK,EAAIvX,IAE/BA,EAAIoV,KAAKwB,IAAI,EAAG,IAAM1H,GAAK,IAAMkG,KAAKqB,KAAS,EAAJvH,EAAQkI,IAAM,EAAIhC,KAAKoB,IAAMa,KAEnFG,eAAgB,SAAUtI,GACxB,IAAIkI,EAAI,QACJC,EAAI,EACJrX,EAAI,EACR,OAAU,IAANkP,EACK,EAEQ,KAAZA,GAAK,GACD,GAEJmI,IACHA,EAAI,IAEFrX,EAAIoV,KAAKkC,IAAI,IACftX,EAAI,EACJoX,EAAIC,EAAI,GAERD,EAAIC,GAAK,EAAIjC,KAAKoB,IAAMpB,KAAKmC,KAAK,EAAIvX,GAEjCA,EAAIoV,KAAKwB,IAAI,GAAI,GAAK1H,GAAKkG,KAAKqB,KAAS,EAAJvH,EAAQkI,IAAM,EAAIhC,KAAKoB,IAAMa,GAAK,IAEhFI,iBAAkB,SAAUvI,GAC1B,IAAIkI,EAAI,QACJC,EAAI,EACJrX,EAAI,EACR,OAAU,IAANkP,EACK,EAEY,KAAhBA,GAAK,IACD,GAEJmI,IACHA,EAAS,GAAM,IAAX,GAEFrX,EAAIoV,KAAKkC,IAAI,IACftX,EAAI,EACJoX,EAAIC,EAAI,GAERD,EAAIC,GAAK,EAAIjC,KAAKoB,IAAMpB,KAAKmC,KAAK,EAAIvX,GAEpCkP,EAAI,EACSlP,EAAIoV,KAAKwB,IAAI,EAAG,IAAM1H,GAAK,IAAMkG,KAAKqB,KAAS,EAAJvH,EAAQkI,IAAM,EAAIhC,KAAKoB,IAAMa,IAA/E,GAEHrX,EAAIoV,KAAKwB,IAAI,GAAI,IAAM1H,GAAK,IAAMkG,KAAKqB,KAAS,EAAJvH,EAAQkI,IAAM,EAAIhC,KAAKoB,IAAMa,GAAK,GAAM,IAE7FK,WAAY,SAAUxI,GACpB,IAAIkI,EAAI,QACR,OAAO,GAAKlI,GAAK,GAAKA,IAAMkI,EAAI,GAAKlI,EAAIkI,IAE3CO,YAAa,SAAUzI,GACrB,IAAIkI,EAAI,QACR,OAAO,IAAMlI,EAAIA,EAAI,EAAI,GAAKA,IAAMkI,EAAI,GAAKlI,EAAIkI,GAAK,IAExDQ,cAAe,SAAU1I,GACvB,IAAIkI,EAAI,QACR,OAAKlI,GAAK,IAAS,EACDA,EAAIA,IAAuB,GAAhBkI,GAAM,QAAelI,EAAIkI,GAA7C,GAEF,KAAUlI,GAAK,GAAKA,IAAuB,GAAhBkI,GAAM,QAAelI,EAAIkI,GAAK,IAElES,aAAc,SAAU3I,GACtB,OAAO,EAAIiF,EAAc2D,cAAc,EAAI5I,IAE7C4I,cAAe,SAAU5I,GACvB,OAAKA,GAAK,GAAM,EAAI,KACN,OAASA,EAAIA,EAAlB,EACEA,EAAK,EAAI,KACX,GAAK,QAAUA,GAAM,IAAM,MAASA,EAAI,KACtCA,EAAK,IAAM,KACb,GAAK,QAAUA,GAAM,KAAO,MAASA,EAAI,OAE3C,GAAK,QAAUA,GAAM,MAAQ,MAASA,EAAI,UAEnD6I,gBAAiB,SAAU7I,GACzB,OAAIA,EAAI,GACqC,GAApCiF,EAAc0D,aAAiB,EAAJ3I,GAEY,GAAzCiF,EAAc2D,cAAkB,EAAJ5I,EAAQ,GAAW,O","file":"static/js/main.7377b8c7.chunk.js","sourcesContent":["// helper file\r\n\r\nimport {createBrowserHistory} from 'history';\r\n\r\nexport default createBrowserHistory();","import React, { Component, useState } from \"react\";\nimport server from \"../../../server\";\n\nconst Feedback = () => {\n  const [sent, setSent] = useState(false);\n  const [value, setValue] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [id, setId] = useState(\"\");\n  const [emailSent, setEmailSent] = useState(false);\n  const sendFeedback = tab => {\n    server.sendFeedback(value, (idFromServer) => {\n      console.log('idFromServer: ', idFromServer);\n      console.log(\"feedback sent\");\n      setSent(true);\n      setId(idFromServer)\n    });\n  };\n\n  const sendEmail = tab => {\n    console.log('id: ', id);\n    \n    server.addEmailToFeedback(email, id, () => {\n      console.log(\"feedback sent\");\n      setEmailSent(true);\n    });\n  };\n  return (\n    <>\n      <div className=\"part\">\n        <h2 className=\"title is-6\">Feedback</h2>\n        {sent ? (\n          <div\n            className=\"field\"\n          >\n            {emailSent ? (\n              <p>Thank you🤩</p>\n            ):\n              (\n                <>\n            <p>Thank you for your feedback, would you like to be notified by email for updates?</p>\n            <input type=\"text\" value={email} onChange={a => setEmail(a.target.value)} />\n            <button\n              onClick={sendEmail}\n              className=\"button block\"\n            >\n              Send\n            </button>\n                  \n                  </>\n            )}\n          </div>\n        ) : (\n          <>\n            <p className=\"field\">\n              Issues, ideas, or other feedback appreciated 😏\n            </p>\n              <textarea className=\"textarea field\" onChange={a => setValue(a.target.value)}></textarea>\n            <button\n              onClick={sendFeedback}\n              className=\"button block\"\n            >\n              Send\n            </button>\n          </>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default Feedback;\n","import React from 'react'\r\nimport classNames from 'classnames'\r\nvar colors = {\r\n  red: '#EA4335',\r\n  blue: '#4285F4',\r\n  brown: '#B15911',\r\n  green: '#34A853',\r\n  gray: '#949494',\r\n  yellow: '#FBBC05',\r\n  purple: '#730B73',\r\n  pink: '#ff94d4'\r\n}\r\n\r\nexport default class ColorPicker extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      panelOpen: false\r\n    }\r\n  }\r\n\r\n  render() {\r\n    var colorsArray = Object.keys(colors)\r\n    var dom = colorsArray.map(color => (\r\n      <div className={classNames('color', 'napchartDontLoseFocus', {\r\n        active: color == this.props.activeColor\r\n      })} key={color} onClick={this.props.onClick.bind(null, color)}>\r\n        <svg viewBox=\"0 0 100 100\">\r\n          <circle cx=\"50\" cy=\"50\" r=\"40\" fill={colors[color]} />\r\n        </svg>\r\n      </div>\r\n    ))\r\n    return (\r\n      <div className=\"ColorPicker\">\r\n        {dom}\r\n      </div>\r\n    )\r\n  }\r\n}","import React from 'react'\r\nimport history from '../../history'\r\n\r\nexport default class extends React.Component {\r\n\t\r\n  render () {\r\n    return (\r\n        <a style={this.props.style} className={this.props.className} \r\n          href={this.props.href} onClick={this.props.onClick || this.onClick}>\r\n            {this.props.children}\r\n        </a>\r\n    );\r\n  }\r\n\r\n  onClick = (e) => {\r\n      const aNewTab = e.metaKey || e.ctrlKey;\r\n      const anExternalLink = this.props.href.startsWith('http');\r\n\r\n      if (!aNewTab && !anExternalLink) {\r\n          e.preventDefault();\r\n          history.push(this.props.href);\r\n      }\r\n  };\r\n}","import PopupVoter from './PopupVoter'\r\n\r\nimport c from 'classnames'\r\n\r\nimport React from 'react'\r\n\r\nimport Header from './Header.jsx'\r\nimport BadBrowser from './BadBrowser.jsx'\r\nimport ToolBar from './ToolBar.jsx'\r\nimport Chart from './Chart.jsx'\r\nimport Link from '../common/Link.jsx'\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nimport Export from './sections/Export.jsx'\r\nimport Info from './sections/Info.jsx'\r\nimport Polyphasic from './sections/Polyphasic.jsx'\r\nimport Controls from './sections/Controls.jsx'\r\n\r\nimport Cookies from 'js-cookie';\r\nimport NotificationSystem from 'react-notification-system'\r\n\r\nimport server from '../../server'\r\nimport { Grommet, Box, Button, Image, Text, Layer } from \"grommet\";\r\nconst myTheme = {\r\n  global: {\r\n    colors: {\r\n      brand: '#EA4335'\r\n    }\r\n  }\r\n};\r\nexport default class App extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    console.log('7.nov 2019')\r\n    var chartid = false;\r\n    if (window.location.pathname.length == 6) {\r\n      chartid = window.location.pathname.substring(1);\r\n    }\r\n    this.state = {\r\n      napchart: false, // until it is initialized\r\n      loading: false,\r\n      url: window.location.origin + \"/\",\r\n      chartid: chartid,\r\n      title: '',\r\n      description: '',\r\n      currentSection: this.getInitialSection(),\r\n      ampm: this.getAmpm(),\r\n      showPopup: false\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    var sections = [\r\n      {\r\n        element: <Controls\r\n          napchart={this.state.napchart}\r\n          description={this.state.description}\r\n          changeDescription={this.changeDescription}\r\n        />,\r\n        text: 'Chart',\r\n        title: 'Chart controls'\r\n      },\r\n      {\r\n        element: <Export\r\n          url={this.state.url}\r\n          chartid={this.state.chartid}\r\n        />,\r\n        text: 'Share',\r\n        title: 'Share and export'\r\n      },\r\n      {\r\n        element: <Polyphasic napchart={this.state.napchart} />,\r\n        text: 'Sleep',\r\n        title: 'Polyphasic Sleep'\r\n      },\r\n      {\r\n        element: <Info ampm={this.state.ampm} setAmpm={this.setAmpm} />,\r\n        text: 'About',\r\n        title: 'About'\r\n      }\r\n    ]\r\n\r\n\r\n    return (\r\n      <Grommet theme={myTheme}>\r\n        <div className=\"Editor\">\r\n          {this.state.showPopup &&\r\n            <PopupVoter onClose={() => {\r\n              console.log('closing')\r\n              this.setState({\r\n                showPopup: false\r\n              })\r\n            }} />\r\n          }\r\n          <BadBrowser />\r\n          <NotificationSystem ref={(notificationSystem) => this._notify = notificationSystem} />\r\n          <Helmet>\r\n            {this.state.description.length && <meta name=\"description\" content={this.state.description} />}\r\n            <meta name=\"twitter:image\" content={`http://thumb.napchart.com:1771/api/getImage?chartid=${this.state.chartid}&width=600&height=600&shape=circle`} />\r\n            <meta property=\"og:image\" content={`http://thumb.napchart.com:1771/api/getImage?chartid=${this.state.chartid}&width=600&height=600&shape=circle`} />\r\n            <meta property=\"og:image:width\" content=\"600\" />\r\n            <meta property=\"og:image:height\" content=\"600\" />\r\n            {this.state.title.length && <title>{`${this.state.title} - Napchart`}</title>}\r\n          </Helmet>\r\n          <div className={c(\"grid\", { slideSidebarMobile: this.state.slideSidebarMobile })}>\r\n            <div className=\"sidebar\">\r\n              <Header\r\n                title={this.state.title}\r\n                changeTitle={this.changeTitle}\r\n                chartid={this.state.chartid}\r\n                save={this.save}\r\n                loading={this.state.loading}\r\n              />\r\n\r\n\r\n              <div className=\"sidebarContent\">\r\n                <div className=\"sideLane\">\r\n                  <div className=\"up\">\r\n                    {sections.map((section, i) =>\r\n                      <button onClick={this.changeSection.bind(null, i)} key={i}\r\n                        className={c(\"squareBtn\", { 'active': (i == this.state.currentSection) })}>\r\n                        {section.text}\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"down\">\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"otherLane\">\r\n                  <ToolBar napchart={this.state.napchart} title={sections[this.state.currentSection].title} />\r\n                  <div className=\"currentInfo\">\r\n\r\n                    {sections[this.state.currentSection].element}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"main\">\r\n              <Chart\r\n                napchart={this.state.napchart}\r\n                onUpdate={this.somethingUpdate}\r\n                setMetaInfo={this.setMetaInfo}\r\n                setGlobalNapchart={this.setGlobalNapchart}\r\n                onLoading={this.loading} onLoadingFinish={this.loadingFinish}\r\n                ampm={this.state.ampm}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {this.state.slideSidebarMobile &&\r\n            <button className=\"button is-light is-large slider left\" onClick={this.slideSidebarMobile}>\r\n              →\r\n          </button>\r\n          }\r\n          {!this.state.slideSidebarMobile &&\r\n            <button className=\"button is-light is-large slider right\" onClick={this.slideSidebarMobile}>\r\n              ←\r\n          </button>\r\n          }\r\n        </div>\r\n      </Grommet>\r\n    )\r\n  }\r\n\r\n  slideSidebarMobile = () => {\r\n    this.setState({\r\n      slideSidebarMobile: !this.state.slideSidebarMobile\r\n    })\r\n  }\r\n\r\n  changeSection = (i) => {\r\n    this.setState({\r\n      currentSection: i\r\n    })\r\n  }\r\n\r\n  setGlobalNapchart = (napchart) => {\r\n    this.setState({\r\n      napchart: napchart\r\n    })\r\n  }\r\n\r\n  setMetaInfo = (title, description) => {\r\n    console.log('title, description: ', title, description);\r\n    this.setState({\r\n      title,\r\n      description\r\n    })\r\n  }\r\n\r\n  somethingUpdate = (napchart) => {\r\n    this.forceUpdate()\r\n  }\r\n\r\n  loadingFinish = () => {\r\n    this.setState({\r\n      loading: false\r\n    })\r\n  }\r\n\r\n  loading = () => {\r\n    this.setState({\r\n      loading: true\r\n    })\r\n  }\r\n\r\n  save = () => {\r\n    this.loading()\r\n    var firstTimeSave = !this.props.chartid\r\n    server.save(this.state.napchart.data, this.state.title,\r\n      this.state.description, (err, chartid) => {\r\n        this.loadingFinish()\r\n        if (err) {\r\n          this._notify.addNotification({\r\n            message: err,\r\n            level: 'error'\r\n          })\r\n        } else {\r\n          this.onSave(chartid)\r\n        }\r\n\r\n      })\r\n  }\r\n\r\n  onSave = (chartid) => {\r\n    // refresh (feels better for the user)\r\n    window.location = '/' + chartid + '?s=1'\r\n  }\r\n\r\n  changeTitle = event => {\r\n    this.setState({\r\n      title: event.target.value\r\n    })\r\n  }\r\n\r\n  changeDescription = event => {\r\n    this.setState({\r\n      description: event.target.value\r\n    })\r\n  }\r\n\r\n  setNumberOfLanes = (lanes) => {\r\n    this.state.napchart.setNumberOfLanes(lanes)\r\n  }\r\n\r\n  getAmpm = () => {\r\n\r\n    const cookiePref = Cookies.get('preferAmpm')\r\n    if (cookiePref) {\r\n      return eval(cookiePref)\r\n    }\r\n\r\n    var date = new Date(Date.UTC(2012, 11, 12, 3, 0, 0));\r\n    var dateString = date.toLocaleTimeString();\r\n\r\n    //apparently toLocaleTimeString() has a bug in Chrome. toString() however returns 12/24 hour formats. If one of two contains AM/PM execute 12 hour coding.\r\n    if (dateString.match(/am|pm/i) || date.toString().match(/am|pm/i)) {\r\n      return true\r\n    }\r\n    else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  setAmpm = (ampm) => {\r\n    Cookies.set('preferAmpm', ampm)\r\n\r\n    this.setState({\r\n      ampm: ampm\r\n    })\r\n  }\r\n\r\n  getInitialSection = () => {\r\n    // should always return 0 except when s=1 found in url, because\r\n    // then the user just saved chart and we will show share section instead\r\n\r\n    if (window.location.toString().includes('s=1')) {\r\n      this.maybeVote()\r\n      return 1\r\n    }\r\n\r\n    return 0\r\n  }\r\n\r\n  maybeVote() {\r\n    setTimeout(() => {\r\n      if(localStorage.getItem(\"has_voted\")){\r\n\r\n      } else {\r\n        this.setState({\r\n          showPopup: true\r\n        })\r\n        console.log('setting to false')\r\n        localStorage.setItem(\"has_voted\", true)\r\n      }\r\n    }, 300)\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\nimport { RadioButton } from \"@bit/primefaces.primereact.radiobutton\";\nimport {\n  Grommet,\n  Box,\n  Text,\n  Layer,\n  RadioButtonGroup,\n  TextInput,\n  Button\n} from \"grommet\";\n\nimport Parse from \"parse\";\nimport shuffle from \"shuffle-array\";\nconst setOptions = shuffle([\n  \"Email & password authentication\",\n  \"Google authentication\",\n  \"Facebook authentication\"\n]);\n\nfunction Example() {\n  const [value, setValue] = React.useState(\"one\");\n  return (\n    <RadioButtonGroup\n      name=\"doc\"\n      options={[\"one\", \"two\"]}\n      value={value}\n      onChange={event => setValue(event.target.value)}\n    />\n  );\n}\n\nconst PopupVoter = ({ onClose }) => {\n  console.log('popup')\n  const [provider, setProvider] = React.useState(setOptions[0]);\n  const [other, setOther] = React.useState(\"\");\n  return (\n    <Layer onClickOutside={onClose}>\n      <Box pad=\"large\">\n        <Text>\n          Hi, <strong>sorry for disturbing</strong>, just a quick question\n        </Text>\n        <Box pad={{ vertical: \"small\" }}>\n          <Text>\n            I am going to implement <strong>user authentication</strong> on\n            Napchart, which login <i>provider</i> would you prefer to use?\n          </Text>\n        </Box>\n        <Box pad=\"small\">\n          {[...setOptions, \"Other\"].map(r => (\n            <Box\n              pad={{ vertical: \"small\" }}\n              direction=\"row\"\n              onClick={() => {\n                setProvider(r);\n              }}\n            >\n              <RadioButton\n                checked={provider == r}\n                name={r}\n                value={r}\n                key={r}\n                disabled={false}\n                onChange={event => {\n                  console.log(\"hest\");\n                  setProvider(r);\n                }}\n                style={{\n                  marginRight: 10,\n                  marginBottom: 5\n                }}\n              />\n              <label htmlFor={r} className=\"p-radiobutton-label\">\n                {r}\n              </label>\n            </Box>\n          ))}\n          {provider == \"Other\" && (\n            <TextInput\n              placeholder=\"Please specify\"\n              value={other}\n              onChange={event => setOther(event.target.value)}\n            />\n          )}\n        </Box>\n        <Box width=\"100%\" direction=\"row\" justify=\"between\">\n          <Button label=\"Cancel\" onClick={onClose} />\n          <Button\n            label=\"Send\"\n            primary\n            onClick={async () => {\n              const Votes = Parse.Object.extend(\"Votes\");\n              \n              const query = new Parse.Query(Votes);\n\n              onClose()\n\n              const providerSuggestion = provider == 'Other' ? other : provider\n\n              query.equalTo(\"provider\", providerSuggestion);\n              const results = await query.find();\n              console.log('results: ', results);\n\n              if(results.length == 0){\n                const vote = new Votes();\n                vote.save({ provider: providerSuggestion, votes: 0 }).then(\n                  vote => {\n                    console.log(vote);\n                  },\n                  error => {\n                  }\n                );\n              } else {\n                results[0].increment('votes').save()\n              }\n              \n              \n            }}\n          />\n        </Box>\n      </Box>\n    </Layer>\n  );\n};\n\nexport default PopupVoter;\n","\r\nimport React from 'react'\r\nimport Logo from '../common/Logo.jsx'\r\nimport c from 'classnames'\r\n\r\n\r\nexport default class extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      editingTitle: false,\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"Header level is-mobile\">\r\n        <div className=\"level-left\">\r\n          <a href=\"/app\">\r\n            <Logo className=\"cornerLogo level-item\" white height=\"45\" loading={this.props.loading} whiteBG />\r\n          </a>\r\n          <div className=\"meta level-item\">\r\n            <div className=\"chartTitle\">\r\n              {this.state.editingTitle &&\r\n                <input type='text' placeholder='Untitled'\r\n                  ref={this.focusField}\r\n                  onBlur={this.editTitleOff}\r\n                  onChange={this.props.changeTitle}\r\n                  value={this.props.title} />\r\n              }\r\n              {!this.state.editingTitle && this.props.chartid &&\r\n                <h1 onClick={this.editTitle}>\r\n                  {this.props.title || 'Untitled'}\r\n                </h1>\r\n              }\r\n              {!this.state.editingTitle && !this.props.chartid &&\r\n                <h1>\r\n                  Unsaved chart\r\n                </h1>\r\n              }\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"level-right\">\r\n\r\n          <a onClick={this.props.save} className={c(\"button is-light level-item\", {'is-loading': this.props.loading})}>Save</a>\r\n        </div>\r\n\r\n      </header>\r\n    )\r\n  }\r\n\r\n  editTitle = () => {\r\n    this.setState({\r\n      editingTitle: true\r\n    })\r\n  }\r\n\r\n  editTitleOff = () => {\r\n    this.setState({\r\n      editingTitle: false\r\n    })\r\n  }\r\n\r\n  focusField = (input) => {\r\n    if (!input) {\r\n      return\r\n    }\r\n    const length = input.value.length;\r\n    input.focus();\r\n    input.setSelectionRange(length, length);\r\n  }\r\n}\r\n","import React from 'react';\n\nconst BadBrowser = ({ name }) => (\n    <section style={{display:'none'}} className=\"BadBrowser hero is-medium is-warning\">\n        <div className=\"hero-body\">\n            <div className=\"container has-text-centered\">\n                <h1 className=\"title\">We're sorry...</h1>\n                <h2 className=\"subtitle\">But your browser is too old to display Naphcart properly</h2>\n                <h2 className=\"subtitle\"><a href=\"http://outdatedbrowser.com/\" className=\"button\">Update your browser</a></h2>\n            </div>\n        </div>\n    </section> \n);\n\nexport default BadBrowser","\r\nimport React from 'react'\r\n\r\nexport default class extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n    }\r\n  }\r\n\r\n  render() {\r\n    var { napchart } = this.props\r\n    if (!napchart) {\r\n      return null\r\n    }\r\n\r\n    return (\r\n      <div className=\"ToolBar\">\r\n        <div className=\"level is-mobile\">\r\n          <div className=\"level-left\">\r\n          </div>\r\n          <div className=\"level-center\">\r\n            <div className=\"level-item\">\r\n              <h2 className=\"subtitle is-6 has-text-grey\">{this.props.title}</h2>\r\n            </div>\r\n          </div>\r\n          <div className=\"level-right\">\r\n            <div className=\"level-item\">\r\n              <button\r\n                onClick={napchart.history.back.bind(napchart)}\r\n                className=\"button is-dark is-outlined is-small\"\r\n                disabled={!napchart.history.canIGoBack()}\r\n                title={\"Undo \" + napchart.history.canIGoBack()}\r\n              >Undo</button>\r\n            </div>\r\n            <div className=\"level-item\">\r\n              <button\r\n                onClick={napchart.history.forward.bind(napchart)}\r\n                className=\"button is-dark is-outlined is-small\"\r\n                disabled={!napchart.history.canIGoForward()}\r\n                title={\"Redo \" + napchart.history.canIGoForward()}>Redo</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  changeColor = (color) => {\r\n    var napchart = this.props.napchart\r\n    napchart.changeColor(this.props.napchart.selectedElement, color)\r\n    napchart.config.defaultColor = color\r\n    this.forceUpdate()\r\n  }\r\n}\r\n","import React from 'react'\r\nimport uuid from 'uuid'\r\nimport Napchart from 'napchart'\r\n\r\nimport server from '../../server'\r\n\r\nexport default class Chart extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      id: uuid.v4()\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    var resizer = this.refs.resizer\r\n\r\n    this.updateDimensions(() =>\r\n      this.initializeChart()\r\n    )\r\n\r\n    window.addEventListener(\"resize\", this.handleResize);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.handleResize)\r\n  }\r\n\r\n  componentWillUpdate() {\r\n    return false\r\n  }\r\n\r\n  render() {\r\n    var blurClass = ''\r\n    if (this.props.loading) {\r\n      blurClass = 'blur'\r\n    }\r\n    return (\r\n      <div className=\"Chart\" ref=\"resizer\">\r\n        <canvas className={\"canvas \" + blurClass} width={this.state.width} height={this.state.height} ref={this.state.id}>\r\n          A chart\r\n        </canvas>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  handleResize = () => {\r\n    this.updateDimensions(() =>\r\n      this.props.napchart.updateDimensions()\r\n    )\r\n  }\r\n\r\n  updateDimensions = (callback) => {\r\n    var resizer = this.refs.resizer\r\n    this.setState({\r\n      width: resizer.clientWidth,\r\n      height: resizer.clientHeight,\r\n    }, callback)\r\n  }\r\n\r\n  initializeChart() {\r\n    var canvas = this.refs[this.state.id]\r\n    var ctx = canvas.getContext('2d')\r\n\r\n    // first check if we should fetch some data\r\n    server.loadChart(this.props.onLoading, this.props.onLoadingFinish, (data) => {\r\n      // returns {} if no data was loaded (you are on base napchart.com/app)\r\n      // returns the data if you are on napchart.com/xxxxx\r\n      var napchart = Napchart.init(ctx, data, {\r\n        responsive: true,\r\n        ampm: this.props.ampm\r\n      })\r\n\r\n      napchart.onUpdate = () => {\r\n        this.props.onUpdate()\r\n      }\r\n\r\n      // for debugging\r\n      window.napchart = napchart\r\n\r\n      canvas.oncontextmenu = function (event) {\r\n        event.preventDefault()\r\n        event.stopPropagation()\r\n        return false\r\n      }\r\n\r\n      this.props.setGlobalNapchart(napchart)\r\n      \r\n      if (Object.keys(data).length) {\r\n        console.log('data: ', data);\r\n        this.props.setMetaInfo(data.metaInfo.title,data.metaInfo.description)\r\n      }\r\n    })\r\n  }\r\n}\r\n","\r\nimport React from 'react'\r\n\r\nexport default class extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Export\">\r\n\r\n        {!this.props.chartid &&\r\n          <div>Save your Napchart to share it</div>\r\n        }\r\n        {this.props.chartid &&\r\n          <div>\r\n            <div className=\"field\">\r\n              <label className=\"label\">URL</label>\r\n              <div className=\"control\">\r\n                <input onChange={() => { }} ref={this.userJustSaved} className=\"input\" type=\"text\" value={this.props.url + this.props.chartid} />\r\n              </div>\r\n            </div>\r\n            <div className=\"field\">\r\n              <label className=\"label\">IMAGE</label>\r\n              <div className=\"control\">\r\n                <a href={'http://thumb.napchart.com:1771/api/getImage?width=600&height=600&chartid=' + this.props.chartid}\r\n                >Image link (600x600)</a>\r\n              </div>\r\n            </div>\r\n            <div className=\"field\">\r\n              <label className=\"label\">EMBED</label>\r\n              <div className=\"control\">\r\n                Embed is possible with the <a target=\"_blank\" href=\"https://github.com/larskarbo/napchart\">napchart library</a>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"field\">\r\n              <label className=\"label\">CSV</label>\r\n              <div className=\"control\">\r\n                {/* <a onClick={() => { csvExport() }} className=\"button\">Download csv</a> */}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  userJustSaved = (input) => {\r\n\r\n    const url = window.location.toString()\r\n    if (url.includes('s=1')) {\r\n      input.focus()\r\n      input.setSelectionRange(input.value.length, input.value.length)\r\n\r\n      // remove tag from url\r\n      const cleanUrl = url.split(\"?\")[0].split(\"#\")[0];\r\n      window.history.replaceState({}, document.title, cleanUrl)\r\n\r\n      return true\r\n    }\r\n  }\r\n}\r\n","import Feedback from './Feedback'\r\n\r\nimport React from 'react'\r\nimport server from '../../../server'\r\n\r\n\r\nexport default class extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      ampmChanged: false\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='Info'>\r\n        <div className=\"part\">\r\n          <div className=\"field\">\r\n            <p>Napchart is a time planning tool that helps you visualize time around a 24 hour clock.</p>\r\n          </div>\r\n\r\n          <div className=\"field\">\r\n            <p><strong>Create element:</strong> Click on an empty space on the chart and drag</p>\r\n          </div>\r\n          <div className=\"field\">\r\n            <p><strong>Delete element:</strong> Set duration to zero or press <kbd>delete</kbd> or <kbd>⌘-⌫</kbd></p>\r\n          </div>\r\n        </div>\r\n        <Feedback />\r\n        <div className=\"part\">\r\n        <h2 className=\"title is-6\">Contribute</h2>\r\n        <p className=\"field\">\r\n          Napchart is open-source and hackable. Check out the projects on GitHub\r\n          🌟\r\n        </p>\r\n        <p className=\"field\">\r\n          <a\r\n            target=\"_blank\"\r\n            href=\"https://github.com/larskarbo/napchart-website\"\r\n          >\r\n            <strong>napchart-website</strong>\r\n          </a>{\" \"}\r\n          on GitHub\r\n        </p>\r\n        <p className=\"field\">\r\n          <a target=\"_blank\" href=\"https://github.com/larskarbo/napchart\">\r\n            <strong>napchart</strong>\r\n          </a>{\" \"}\r\n          on GitHub\r\n        </p>\r\n      </div>\r\n        <div className=\"part\">\r\n          <label className=\"label\">Time format</label>\r\n          <div className=\"control\">\r\n            <label className=\"radio\">\r\n              <input type=\"radio\" name=\"answer\" onChange={this.changeAmpm.bind(null, true)} checked={this.props.ampm} />\r\n              <span> AM/PM</span>\r\n            </label>\r\n            <label className=\"radio\">\r\n              <input type=\"radio\" name=\"answer\" onChange={this.changeAmpm.bind(null, false)} checked={!this.props.ampm} />\r\n              <span> 24 hours</span>\r\n            </label>\r\n            {this.state.ampmChanged &&\r\n              <p>Refresh to update</p>\r\n            }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  changeAmpm = (ampm) => {\r\n    console.log(ampm)\r\n    this.props.setAmpm(ampm)\r\n    this.setState({\r\n      ampmChanged: true\r\n    })\r\n  }\r\n\r\n}\r\n","import React from 'react'\r\nimport c from 'classnames'\r\n\r\n\r\nexport default class Chart extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n  }\r\n\r\n  render() {\r\n    var napchart = this.props.napchart\r\n    if (!napchart) {\r\n      return null\r\n    }\r\n    var shapes = ['circle', 'wide', 'line']\r\n\r\n    var shapeButtons = shapes.map(shape => {\r\n      var classes = {\r\n        'is-active': napchart.data.shape == shape,\r\n        'is-primary': napchart.data.shape == shape\r\n      }\r\n      return (\r\n        <p className=\"control\" key={shape}>\r\n          <button className={c(\"button\", \"is-small\", \"napchartDontLoseFocus\", classes)}\r\n            onClick={napchart.changeShape.bind(napchart, shape)}\r\n          >\r\n            {shape}\r\n          </button>\r\n        </p>\r\n      )\r\n    })\r\n    return (\r\n      <div className=\"field has-addons level is-mobile\">\r\n        <div className=\"level-left\">\r\n          <div className=\"level-item title is-6\">\r\n            Shape:\r\n          </div>\r\n          <div className=\"level-item\">\r\n            {shapeButtons}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport c from 'classnames'\r\n\r\nexport default class extends React.Component {\r\n  render() {\r\n    var napchart = this.props.napchart\r\n    if (!napchart) {\r\n      return null\r\n    }\r\n    // generate array with laneIndexes: [0,1,2,3,4]\r\n    var laneIndexes = []\r\n    for (let i = 0; i < napchart.data.lanes; i++) {\r\n      laneIndexes.push(i)\r\n    }\r\n    var lanes = laneIndexes.map((index) => {\r\n      var laneConfig = napchart.getLaneConfig(index)\r\n      return (\r\n        <div className=\"field domLane fullWidth\" key={index}>\r\n          <div className=\"level is-mobile\">\r\n            <div className=\"level-left\">\r\n              <p>{index + 1}\t {this.duration(index)}</p>\r\n            </div>\r\n            <div className=\"level-right\">\r\n              <div className=\"level-item\">\r\n                <button\r\n                  onClick={napchart.toggleLockLane.bind(napchart, index)}\r\n                  className={c(\"button is-small\", { 'is-active': laneConfig.locked, 'is-dark': laneConfig.locked })}>Lock</button>\r\n              </div>\r\n              <div className=\"level-item\">\r\n                <button onClick={napchart.deleteLane.bind(napchart, index)}\r\n                  className=\"button is-small\"\r\n                  disabled={napchart.data.lanes == 1}>Delete</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )\r\n    })\r\n    return (\r\n      <div className=\"field SuperLanes\">\r\n        <p className=\"field title is-6\">Lanes:</p>\r\n        <div className=\"field\">\r\n          {lanes}\r\n        </div>\r\n        <button onClick={napchart.addLane.bind(napchart)}\r\n          className=\"button is-small\">Add lane +</button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  duration = (laneIndex) => {\r\n    const helpers = this.props.napchart.helpers\r\n    const minutes = this.props.napchart.data.elements.reduce((minutes, element) => {\r\n      if (element.lane == laneIndex) {\r\n        return minutes + helpers.duration(element.start, element.end)\r\n      } else {\r\n        return minutes\r\n      }\r\n    }, 0)\r\n    return helpers.minutesToReadable(minutes)\r\n  }\r\n}\r\n","import React from 'react'\r\nimport ColorPicker from './ColorPicker.jsx'\r\n\r\nexport default class extends React.Component {\r\n  render() {\r\n    var napchart = this.props.napchart\r\n    var selected = napchart.selectedElement\r\n\r\n    if (napchart) {\r\n      var element = napchart.data.elements.find(e => e.id == selected)\r\n      var activeColor = (typeof element == 'undefined') ? napchart.config.defaultColor : element.color\r\n\r\n\r\n      return (\r\n        <div className=\"SelectedElement\">\r\n          <div className=\"field\">\r\n            <ColorPicker\r\n              onClick={this.changeColor}\r\n              activeColor={activeColor}\r\n            />\r\n          </div>\r\n          <div className=\"field\">\r\n            <input style={{ color: activeColor }} className=\"colorTag\" type='text' placeholder={activeColor + ' ='}\r\n              onChange={this.changeColorTag}\r\n              value={this.colorTag(activeColor)}\r\n            />\r\n          </div>\r\n\r\n          {selected &&\r\n            <div>\r\n              <div className=\"field has-addons level is-mobile\">\r\n                <div className=\"level-left\">\r\n                  <div className=\"level-item\">\r\n                    Selected element:\r\n                  </div>\r\n                  <div className=\"level-item\">\r\n                    <button onClick={napchart.deleteElement.bind(napchart, selected)} className=\"napchartDontLoseFocus button\">Delete</button>\r\n                    {napchart.isTouchUser &&\r\n                      <button onClick={napchart.forceFocusSelected} className=\"napchartDontLoseFocus button\">Edit text</button>\r\n                    }\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n\r\n\r\n            </div>\r\n          }\r\n        </div>\r\n      )\r\n\r\n\r\n    } else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  colorTag = (color) => {\r\n    var napchart = this.props.napchart\r\n    var tagObj = napchart.data.colorTags.find(t => t.color == color)\r\n\r\n    if (typeof tagObj == 'undefined') {\r\n      return ''\r\n    } else {\r\n      return tagObj.tag\r\n    }\r\n  }\r\n\r\n  changeColor = (color) => {\r\n    var napchart = this.props.napchart\r\n    napchart.changeColor(this.props.napchart.selectedElement, color)\r\n    napchart.config.defaultColor = color\r\n    this.forceUpdate()\r\n  }\r\n\r\n  changeColorTag = (e) => {\r\n    var napchart = this.props.napchart\r\n    var activeColor = napchart.config.defaultColor\r\n\r\n    napchart.colorTag(activeColor, e.target.value)\r\n    this.forceUpdate()\r\n  }\r\n}","import React, { Component } from 'react'\nimport server from '../../../server'\nimport Feedback from './Feedback'\nimport Shapes from '../small/Shapes.jsx'\nimport SuperLanes from '../small/SuperLanes.jsx'\nimport SelectedElement from '../small/SelectedElement.jsx'\n\nexport default class Controls extends Component {\n  render() {\n    var { napchart } = this.props\n    if (!napchart) {\n      return null\n    }\n    return (\n      <div>\n        <div>\n          <div>\n            <div className=\"part fullWidth\">\n              {/* <div className=\"field title is-6\">\n                Description:\n              </div> */}\n              <textarea type='text' className=\"description\" placeholder='Describe this chart'\n                onChange={this.props.changeDescription}\n                value={this.props.description} />\n            </div>\n            <div className=\"part\">\n              <Shapes napchart={napchart} />\n            </div>\n            <div className=\"part\">\n              <SuperLanes\n                napchart={napchart}\n              />\n            </div>\n            <div className=\"part\">\n              <div className=\"field title is-6\">\n                Color:\n              </div>\n              <SelectedElement napchart={napchart} />\n            </div>\n            <Feedback />\n\n          </div>\n\n        </div>\n      </div>\n    )\n  }\n\n\n  sendFeedback = (tab) => {\n    var value = this.refs.feedback.value\n\n\n    server.sendFeedback(value, () => {\n      console.log('feedback sent')\n      this.refs.feedback.style.display = 'none'\n      this.refs.feedbacksend.style.display = 'none'\n      this.refs.afterfeedback.style.display = 'block'\n    })\n\n\n  }\n};\n","import React from 'react'\r\nimport c from 'classnames'\r\n\r\nexport default class Lanes extends React.Component {\r\n  render() {\r\n    var napchart = this.props.napchart\r\n    if (!napchart) {\r\n      return null\r\n    }\r\n    // generate array with laneIndexes: [0,1,2,3,4]\r\n    var laneIndexes = []\r\n    for (let i = 0; i < napchart.data.lanes; i++) {\r\n      laneIndexes.push(i)\r\n    }\r\n    var laneButtons = laneIndexes.map((index) => {\r\n      var disabled = this.props.disabledLane(index)\r\n      var classes = {\r\n        button: true,\r\n        'is-active': index == this.props.active,\r\n        'is-dark': index == this.props.active,\r\n        disabled: disabled,\r\n        napchartDontLoseFocus: true\r\n      }\r\n      return (\r\n        <p className=\"control\" key={index}>\r\n          <button className={c(classes)}\r\n            onClick={!disabled && this.props.clickLane.bind('', index)}\r\n            disabled={disabled}\r\n          >\r\n            {index + 1}\r\n          </button>\r\n        </p>\r\n      )\r\n    })\r\n\r\n    const activeLaneConfig = napchart.getLaneConfig(this.props.active);\r\n    return (\r\n      <div className=\"field has-addons level is-mobile\" >\r\n        <div className=\"level-left\">\r\n          <div className=\"level-item\">\r\n            Lane:\r\n          </div>\r\n          <div className=\"level-item\">\r\n            {laneButtons}\r\n          </div>\r\n          <div className=\"level-item\">\r\n            <button\r\n              onClick={napchart.toggleLockLane.bind(napchart, this.props.active)}\r\n              className={c(\"button is-small\", { 'is-active': activeLaneConfig.locked, 'is-dark': activeLaneConfig.locked })}>Lock</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport sampleSchedules from './polyphasic/sampleSchedules.json'\r\nimport ColorPicker from '../small/ColorPicker.jsx'\r\nimport Lanes from '../small/Lanes.jsx'\r\n\r\n\r\nexport default class Polyphasic extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      sleepLane: 0,\r\n      color: 'red'\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Polyphasic\">\r\n        <div className=\"field\">Clicking on any of the schedules will overwrite all elements in the selected lane</div>\r\n        <div className=\"field\">\r\n          <Lanes\r\n            napchart={this.props.napchart}\r\n            clickLane={this.setLane}\r\n            active={this.state.sleepLane}\r\n            disabledLane={(lane) => lane > this.props.napchart.data.lanes}\r\n          />\r\n        </div>\r\n        <div className=\"field\">\r\n          <ColorPicker\r\n            onClick={this.changeColor}\r\n            activeColor={this.state.color}\r\n          />\r\n        </div>\r\n        <div className=\"panel field\">\r\n          <p className=\"panel-heading\">\r\n            Schedules\r\n          </p>\r\n          {/* <div className=\"panel-block\">\r\n            <p className=\"control has-icons-left\">\r\n              <input className=\"input is-small\" type=\"text\" placeholder=\"search\" />\r\n              <span className=\"icon is-small is-left\">\r\n                <i className=\"fas fa-search\"></i>\r\n              </span>\r\n            </p>\r\n          </div> */}\r\n          {/* <p className=\"panel-tabs\">\r\n            <a className=\"is-active\">all</a>\r\n            <a>public</a>\r\n            <a>private</a>\r\n            <a>sources</a>\r\n            <a>forks</a>\r\n          </p> */}\r\n\r\n\r\n          {sampleSchedules.map(schedule => (\r\n            <a key={schedule.name} className=\"panel-block\"\r\n              onClick={this.changeSchedule.bind(null, schedule)}>\r\n              <div className=\"level is-mobile schedule\">\r\n                <div className=\"level-left\">\r\n                  <div className=\"level-item\">\r\n                    <span>{schedule.name}</span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"level-right\">\r\n                  <div className=\"level-item\">\r\n                    <span className=\"duration\">{this.calculateDuration(schedule)}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </a>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  calculateDuration = (schedule) => {\r\n    var helpers = this.props.napchart.helpers\r\n    const minutes = schedule.elements.reduce((minutes, element) => {\r\n      return minutes + helpers.duration(element.start, element.end)\r\n    }, 0)\r\n    return helpers.minutesToReadable(minutes)\r\n  }\r\n\r\n  changeSchedule = (schedule) => {\r\n    var lane = this.state.sleepLane // because napchart counts from 0, 1, 2 ...\r\n    var elements = schedule.elements.map(element => {\r\n      return {\r\n        start: element.start,\r\n        end: element.end,\r\n        lane: lane,\r\n        color: this.state.color\r\n      }\r\n    })\r\n    var napchart = this.props.napchart\r\n    napchart.emptyLane(lane)\r\n    napchart.initAndAddElements(elements)\r\n    napchart.history.add('Use polyphasic schedule')\r\n\r\n    // find a element on the lane and select it\r\n    var eol = napchart.data.elements.find(e => e.lane == lane)\r\n    napchart.setSelected(eol.id)\r\n  }\r\n\r\n  setLane = (lane) => {\r\n    this.setState({\r\n      sleepLane: lane\r\n    })\r\n  }\r\n\r\n  changeColor = (color) => {\r\n    this.setState({\r\n      color: color\r\n    })\r\n  }\r\n\r\n}","// helper file\r\n\r\nimport axios from \"axios\";\r\nimport Parse from \"parse\";\r\n\r\nParse.initialize(\r\n  \"osxjLrTMW7cJ6r6IPOpDYXyuBzBRSzQTaNeza7O6\",\r\n  \"rijTlVRNfqPPV2X9MLnRAP1UDzQbz7UTRjfCOaQ6\"\r\n);\r\nParse.serverURL =\r\n  \"https://pg-app-57gagyy9xq3pta5kvgpzs2dh6gv7w5.scalabl.cloud/1/\";\r\n// Parse.initialize(\"napchart\");\r\n// Parse.serverURL = \"http://localhost:1337/1/\";\r\n\r\nconst Chart = Parse.Object.extend(\"Chart\");\r\n\r\nexport default {\r\n  save: (data, title, description, cb) => {\r\n    var chart = new Chart();\r\n\r\n    const results = Parse.Cloud.run(\"createChart\", {\r\n      chartid: \"123f5\",\r\n      title: title,\r\n      description: description,\r\n      chartData: data\r\n    })\r\n      .then(response => {\r\n        console.log(response);\r\n        var chartid = response.chartid;\r\n\r\n        cb(null, chartid);\r\n      })\r\n      .catch(hm => {\r\n        console.error(\"oh no!:\", hm);\r\n        cb(\"Oh no! There was an error with your request. Please try again\");\r\n      });\r\n  },\r\n\r\n  loadChart: async (loading, loadFinish, cb) => {\r\n    // first check if fetch is needed\r\n    var chartid = false;\r\n    if (window.location.pathname.length == 6) {\r\n      chartid = window.location.pathname.substring(1);\r\n    }\r\n\r\n    if (!chartid) {\r\n      console.log(\"no chartid, nothing to load\");\r\n      return cb({});\r\n    }\r\n\r\n    loading();\r\n\r\n    const query = new Parse.Query(Chart);\r\n    query.equalTo(\"chartid\", chartid);\r\n    const results = await query.find();\r\n    console.log(\"results: \", results);\r\n    const chart = results[0];\r\n    console.log();\r\n    const data = {\r\n      id: chartid,\r\n      ...chart.get(\"chartData\"),\r\n      metaInfo: {\r\n        title: chart.get(\"title\"),\r\n        description: chart.get(\"description\")\r\n      }\r\n    };\r\n    loadFinish();\r\n\r\n    return cb(data);\r\n  },\r\n\r\n  sendFeedback: (feedback, cb) => {\r\n    if(feedback.length == 0){\r\n      return\r\n    }\r\n    const Feedback = new Parse.Object.extend(\"Feedback\");\r\n    const fb = new Feedback();\r\n\r\n    fb.save({\r\n      feedback\r\n    }).then(response => {\r\n      console.log(response);\r\n      cb(response.id);\r\n    });\r\n    // axios\r\n    //   .post(\"/api/postFeedback\", {\r\n    //     data: JSON.stringify(feedback)\r\n    //   })\r\n  },\r\n\r\n  addEmailToFeedback: async (email, feedbackId, cb) => {\r\n    const Feedback = new Parse.Object.extend(\"Feedback\");\r\n    const query = new Parse.Query(Feedback);\r\n    query.equalTo(\"objectId\", feedbackId);\r\n    console.log('feedbackId: ', feedbackId);\r\n    const results = await query.find();\r\n    console.log('results: ', results);\r\n\r\n    results[0].set(\"email\", email);\r\n\r\n    results[0].save().then(response => {\r\n      console.log(response);\r\n      cb();\r\n    });\r\n    // axios\r\n    //   .post(\"/api/postFeedback\", {\r\n    //     data: JSON.stringify(feedback)\r\n    //   })\r\n  }\r\n};\r\n","\r\nimport classNames from 'classnames'\r\n\r\nimport React from 'react'\r\n\r\nimport Logo from '../common/Logo.jsx'\r\nimport Link from '../common/Link.jsx'\r\n\r\nexport default class extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <section className=\"section hero is-dark is-bold is-fullheight\">\r\n          <div className=\"hero-body\">\r\n            <div className=\"column has-text-centered\">\r\n              <div className=\"bigLogo\">\r\n                <Logo noInteraction logoText=\"Napchart\" height=\"150\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"hero-foot\">\r\n            <Link href=\"/app\">\r\n              <Logo white noInteraction logoText=\"GO TO APP\" height=\"45\" />\r\n            </Link>\r\n\r\n          </div>\r\n        </section>\r\n\r\n\r\n        <section className=\"section hero is-light\">\r\n          <div className=\"hero-body\">\r\n            <div className=\"container\">\r\n              <div className=\"columns\">\r\n                <div className=\"column has-text-centered\">\r\n                  <h1 className=\"title is-3\">Visualize complex time schedules</h1>\r\n\r\n                  <video src=\"/chartvideo.mp4\" poster=\"/chartvideothumb.png\" autoPlay loop muted>\r\n                  </video>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        <section className=\"section hero is-warning\">\r\n          <div className=\"hero-body\">\r\n            <div className=\"container\">\r\n              <div className=\"columns\">\r\n                <div className=\"column has-text-centered vertical-align-center\">\r\n                  <h2 className=\"title is-4\">Ultimate sharing experience</h2>\r\n                  <p>Save a chart with one click, and share the unique link with the world.</p>\r\n                </div>\r\n                <div className=\"column has-text-centered\">\r\n                  <img src=\"/save.png\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        <section className=\"section hero is-light\">\r\n          <div className=\"hero-body\">\r\n            <div className=\"container\">\r\n              <div className=\"columns rtl\">\r\n                <div className=\"column has-text-centered vertical-align-center\">\r\n                  <h2 className=\"title is-2\">Experiment with polyphasic sleep</h2>\r\n                  <p>Napchart has over 20 polyphasic sleep presets and is often\r\n                used by the community to share, discuss and plan schedules</p>\r\n                </div>\r\n                <div className=\"column has-text-centered\">\r\n                  <img src=\"/polyphasic.png\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n\r\n        <section className=\"section hero is-dark\">\r\n          <div className=\"hero-body\">\r\n            <div className=\"container has-text-centered\">\r\n              <a href=\"/app\" className=\"button\">\r\n                <Logo whiteBG noInteraction logoText=\"GO TO APP\" height=\"45\" />\r\n              </a>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"hero-foot\">\r\n            <div className=\"container has-text-centered\">\r\n              <p><a target=\"_blank\" href=\"fjdi\"><strong>napchart-website</strong></a> on GitHub</p>\r\n              <p><a target=\"_blank\" href=\"fjdi\"><strong>napchart</strong></a> on GitHub</p>\r\n              <p>🌟 Copyright 2013-2018 Lars Karbo 🌟</p>\r\n\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import toRegex from 'path-to-regexp';\r\n\r\nimport React from 'react';\r\n\r\nimport Editor from './Editor/Editor.jsx'\r\nimport Intro from './Intro/Intro.jsx'\r\n\r\nconst routes = [\r\n\t{\r\n\t\tpath: '/',\r\n\tcomponent: () => <Intro />\r\n\t},\r\n\t{\r\n\t\tpath: '/app',\r\n\t\tcomponent: () => <Editor />\r\n\t},\r\n\t{\r\n\t\tpath: '/:chartid',\r\n\t\tcomponent: (params) => <Editor chartid={\"hey\"} />\r\n\t},\r\n]\r\n\r\nfunction matchURI(path, uri) {\r\n\tconst keys = [];\r\n\tconst pattern = toRegex(path, keys); // TODO: Use caching\r\n\tconst match = pattern.exec(uri);\r\n\tif (!match) return null;\r\n\tconst params = Object.create(null);\r\n\tfor (let i = 1; i < match.length; i++) {\r\n\t\tparams[keys[i - 1].name] =\r\n\t\t\tmatch[i] !== undefined ? match[i] : undefined;\r\n\t}\r\n\treturn params;\r\n}\r\n\r\nfunction resolve(context) {\r\n\tfor (const route of routes) {\r\n\t\tconst uri = context.error ? '/error' : context.pathname;\r\n\t\tconst params = matchURI(route.path, uri);\r\n\t\tif (!params) continue;\r\n\t\tconst result = route.component(params);\r\n\t\tif (result) return result;\r\n\t}\r\n\tconst error = new Error('Not found');\r\n\terror.status = 404;\r\n\tthrow error;\r\n}\r\n\r\nexport default { resolve };","import React from 'react'\r\n\r\n\r\nimport styles from '../styles/index.scss'\r\n\r\nimport history from '../history'\r\nimport router from './routes.jsx'\r\n\r\nexport default class Router extends React.Component {\r\n  constructor(props){\r\n    super(props)\r\n\r\n    this.state = {\r\n      currentPath: history.location\r\n    }\r\n  }\r\n\r\n  render() {\r\n    var Component = router.resolve(window.location)\r\n    return (Component)\r\n  }\r\n\r\n  componentDidMount() {\r\n    history.listen((location) => {\r\n      this.setState({\r\n        currentPath: location\r\n      })\r\n    });\r\n  }\r\n}\r\n","/*\r\n    ./client/index.js\r\n    which is the webpack entry file\r\n*/\r\n\r\nimport React from 'react'\r\nimport { render } from 'react-dom'\r\n\r\nimport App from './components/App.jsx'\r\n\r\nrender(\r\n  <App />,\r\n  document.getElementById('root')\r\n)\r\n","import React from 'react'\r\nimport Napchart from 'napchart'\r\nimport classNames from 'classnames'\r\nimport uuid from 'uuid'\r\n\r\nexport default class Chart extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      napchart: false,\r\n      hasStartedSpinning: false,\r\n      ref: uuid.v4()\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initializeChart()\r\n  }\r\n\r\n  render() {\r\n    if (this.props.loading && !this.state.hasStartedSpinning && this.state.napchart) {\r\n      this.spinLoad()\r\n    }\r\n\r\n    var height = this.props.height\r\n    return (\r\n      <div className={\"logoContainer \" + this.props.className}>\r\n        <div className=\"canvasParent\" style={{ width: height + 'px' }}>\r\n          <canvas width={height} height={height} ref={this.state.ref}></canvas>\r\n        </div>\r\n        <div className=\"text\">\r\n          {this.props.logoText &&\r\n            <span style={{ fontSize: height / 2 }}\r\n              className={classNames(\"logoText\", { dark: this.props.whiteBG })}\r\n            >{this.props.logoText}</span>\r\n          }\r\n\r\n          {height > 120 &&\r\n            <span className={classNames(\"slogan\", { dark: this.props.whiteBG })}>\r\n              24 hour time-planner\r\n            </span>\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  initializeChart() {\r\n    var canvas = this.refs[this.state.ref]\r\n    var ctx = canvas.getContext('2d')\r\n\r\n    var elements = [{\r\n      \"end\": 320, \"start\": 30, \"lane\": 0, \"id\": 4082, \"text\": \"\", \"color\": \"red\", \"duration\": 240\r\n    }, {\r\n      \"end\": 680, \"start\": 390, \"lane\": 0, \"id\": 545, \"text\": \"\", \"color\": \"green\", \"duration\": 240\r\n    }, {\r\n      \"start\": 750, \"end\": 1040, \"lane\": 0, \"id\": 8540, \"text\": \"\", \"color\": \"brown\", \"duration\": 240\r\n    }, {\r\n      \"start\": 1110, \"end\": 1400, \"lane\": 0, \"id\": 9693, \"text\": \"\", \"color\": \"yellow\", \"duration\": 240\r\n    }]\r\n\r\n    if (this.props.white) {\r\n      elements = elements.map(e => ({\r\n        ...e,\r\n        color: 'white'\r\n      }))\r\n    }\r\n\r\n    var napchart = Napchart.init(ctx, {\r\n      elements: elements,\r\n      shape: 'miniCircle',\r\n      lanes: 1\r\n    }, {\r\n        text: false,\r\n        drawFace: false,\r\n        interaction: !this.props.noInteraction ? true : false\r\n      })\r\n\r\n    napchart.data.elements.forEach(element => {\r\n      element.initialStart = element.start\r\n      element.initialEnd = element.end\r\n    })\r\n\r\n    this.state.napchart = napchart\r\n  }\r\n\r\n  spinLoad = (callback) => {\r\n    this.setState({\r\n      hasStartedSpinning: true\r\n    })\r\n\r\n    var shouldIContinue = () => {\r\n      if (this.props.loading) {\r\n        this.continueSpin(shouldIContinue)\r\n      } else {\r\n        this.endSpin(() => {\r\n          this.setState({\r\n            hasStartedSpinning: false\r\n          })\r\n        })\r\n      }\r\n    }\r\n\r\n    this.startSpin(() => {\r\n      this.continueSpin(shouldIContinue)\r\n    })\r\n  }\r\n\r\n  startSpin = (callback) => {\r\n    this.spin(500, easingEffects.easeInSine, 290, 1440 / 4, callback)\r\n  }\r\n\r\n  continueSpin = (callback) => {\r\n    this.spin(250, easingEffects.linear, 1440 / 4, 1440 / 4, callback)\r\n  }\r\n\r\n  endSpin = (callback) => {\r\n    this.spin(500, easingEffects.easeOutSine, 1440 / 4, 290, callback)\r\n  }\r\n\r\n  spin(duration, easingEffect, animateFromDuration, animateToDuration, callback) {\r\n    var napchart = this.state.napchart\r\n\r\n    var start = Date.now()\r\n\r\n    function step() {\r\n      var now = Date.now()\r\n      var progress = Math.min((now - start) / duration, 1)\r\n      if (progress >= 1) {\r\n        return callback()\r\n      }\r\n      var progress = easingEffect(progress)\r\n\r\n\r\n      var newElements = napchart.data.elements.map(element => {\r\n        var distance = 1440\r\n\r\n        var sizeAnimate = 36 * progress\r\n        var thisDuration = animateFromDuration + (animateToDuration - animateFromDuration) * progress\r\n        // console.log(sizeAnimate)\r\n        var start = element.initialStart + distance * progress - sizeAnimate\r\n        var end = start + thisDuration\r\n        return {\r\n          ...element,\r\n          start,\r\n          end// + distance * progress + sizeAnimate\r\n        }\r\n      })\r\n      napchart.setElements(newElements)\r\n      if (progress < 1) {\r\n        // console.log(progress)\r\n        requestAnimationFrame(step)\r\n      }\r\n    }\r\n\r\n    step()\r\n  }\r\n\r\n}\r\n\r\nvar easingEffects = {\r\n  linear: function (t) {\r\n    return t\r\n  },\r\n  easeInQuad: function (t) {\r\n    return t * t\r\n  },\r\n  easeOutQuad: function (t) {\r\n    return -1 * t * (t - 2)\r\n  },\r\n  easeInOutQuad: function (t) {\r\n    if ((t /= 1 / 2) < 1) {\r\n      return 1 / 2 * t * t\r\n    }\r\n    return -1 / 2 * ((--t) * (t - 2) - 1)\r\n  },\r\n  easeInCubic: function (t) {\r\n    return t * t * t\r\n  },\r\n  easeOutCubic: function (t) {\r\n    return 1 * ((t = t / 1 - 1) * t * t + 1)\r\n  },\r\n  easeInOutCubic: function (t) {\r\n    if ((t /= 1 / 2) < 1) {\r\n      return 1 / 2 * t * t * t\r\n    }\r\n    return 1 / 2 * ((t -= 2) * t * t + 2)\r\n  },\r\n  easeInQuart: function (t) {\r\n    return t * t * t * t\r\n  },\r\n  easeOutQuart: function (t) {\r\n    return -1 * ((t = t / 1 - 1) * t * t * t - 1)\r\n  },\r\n  easeInOutQuart: function (t) {\r\n    if ((t /= 1 / 2) < 1) {\r\n      return 1 / 2 * t * t * t * t\r\n    }\r\n    return -1 / 2 * ((t -= 2) * t * t * t - 2)\r\n  },\r\n  easeInQuint: function (t) {\r\n    return 1 * (t /= 1) * t * t * t * t\r\n  },\r\n  easeOutQuint: function (t) {\r\n    return 1 * ((t = t / 1 - 1) * t * t * t * t + 1)\r\n  },\r\n  easeInOutQuint: function (t) {\r\n    if ((t /= 1 / 2) < 1) {\r\n      return 1 / 2 * t * t * t * t * t\r\n    }\r\n    return 1 / 2 * ((t -= 2) * t * t * t * t + 2)\r\n  },\r\n  easeInSine: function (t) {\r\n    return -1 * Math.cos(t / 1 * (Math.PI / 2)) + 1\r\n  },\r\n  easeOutSine: function (t) {\r\n    return 1 * Math.sin(t / 1 * (Math.PI / 2))\r\n  },\r\n  easeInOutSine: function (t) {\r\n    return -1 / 2 * (Math.cos(Math.PI * t / 1) - 1)\r\n  },\r\n  easeInExpo: function (t) {\r\n    return (t === 0) ? 1 : 1 * Math.pow(2, 10 * (t / 1 - 1))\r\n  },\r\n  easeOutExpo: function (t) {\r\n    return (t === 1) ? 1 : 1 * (-Math.pow(2, -10 * t / 1) + 1)\r\n  },\r\n  easeInOutExpo: function (t) {\r\n    if (t === 0) {\r\n      return 0\r\n    }\r\n    if (t === 1) {\r\n      return 1\r\n    }\r\n    if ((t /= 1 / 2) < 1) {\r\n      return 1 / 2 * Math.pow(2, 10 * (t - 1))\r\n    }\r\n    return 1 / 2 * (-Math.pow(2, -10 * --t) + 2)\r\n  },\r\n  easeInCirc: function (t) {\r\n    if (t >= 1) {\r\n      return t\r\n    }\r\n    return -1 * (Math.sqrt(1 - (t /= 1) * t) - 1)\r\n  },\r\n  easeOutCirc: function (t) {\r\n    return 1 * Math.sqrt(1 - (t = t / 1 - 1) * t)\r\n  },\r\n  easeInOutCirc: function (t) {\r\n    if ((t /= 1 / 2) < 1) {\r\n      return -1 / 2 * (Math.sqrt(1 - t * t) - 1)\r\n    }\r\n    return 1 / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1)\r\n  },\r\n  easeInElastic: function (t) {\r\n    var s = 1.70158\r\n    var p = 0\r\n    var a = 1\r\n    if (t === 0) {\r\n      return 0\r\n    }\r\n    if ((t /= 1) === 1) {\r\n      return 1\r\n    }\r\n    if (!p) {\r\n      p = 1 * 0.3\r\n    }\r\n    if (a < Math.abs(1)) {\r\n      a = 1\r\n      s = p / 4\r\n    } else {\r\n      s = p / (2 * Math.PI) * Math.asin(1 / a)\r\n    }\r\n    return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p))\r\n  },\r\n  easeOutElastic: function (t) {\r\n    var s = 1.70158\r\n    var p = 0\r\n    var a = 1\r\n    if (t === 0) {\r\n      return 0\r\n    }\r\n    if ((t /= 1) === 1) {\r\n      return 1\r\n    }\r\n    if (!p) {\r\n      p = 1 * 0.3\r\n    }\r\n    if (a < Math.abs(1)) {\r\n      a = 1\r\n      s = p / 4\r\n    } else {\r\n      s = p / (2 * Math.PI) * Math.asin(1 / a)\r\n    }\r\n    return a * Math.pow(2, -10 * t) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) + 1\r\n  },\r\n  easeInOutElastic: function (t) {\r\n    var s = 1.70158\r\n    var p = 0\r\n    var a = 1\r\n    if (t === 0) {\r\n      return 0\r\n    }\r\n    if ((t /= 1 / 2) === 2) {\r\n      return 1\r\n    }\r\n    if (!p) {\r\n      p = 1 * (0.3 * 1.5)\r\n    }\r\n    if (a < Math.abs(1)) {\r\n      a = 1\r\n      s = p / 4\r\n    } else {\r\n      s = p / (2 * Math.PI) * Math.asin(1 / a)\r\n    }\r\n    if (t < 1) {\r\n      return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p))\r\n    }\r\n    return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) * 0.5 + 1\r\n  },\r\n  easeInBack: function (t) {\r\n    var s = 1.70158\r\n    return 1 * (t /= 1) * t * ((s + 1) * t - s)\r\n  },\r\n  easeOutBack: function (t) {\r\n    var s = 1.70158\r\n    return 1 * ((t = t / 1 - 1) * t * ((s + 1) * t + s) + 1)\r\n  },\r\n  easeInOutBack: function (t) {\r\n    var s = 1.70158\r\n    if ((t /= 1 / 2) < 1) {\r\n      return 1 / 2 * (t * t * (((s *= (1.525)) + 1) * t - s))\r\n    }\r\n    return 1 / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2)\r\n  },\r\n  easeInBounce: function (t) {\r\n    return 1 - easingEffects.easeOutBounce(1 - t)\r\n  },\r\n  easeOutBounce: function (t) {\r\n    if ((t /= 1) < (1 / 2.75)) {\r\n      return 1 * (7.5625 * t * t)\r\n    } else if (t < (2 / 2.75)) {\r\n      return 1 * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75)\r\n    } else if (t < (2.5 / 2.75)) {\r\n      return 1 * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375)\r\n    }\r\n    return 1 * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375)\r\n  },\r\n  easeInOutBounce: function (t) {\r\n    if (t < 1 / 2) {\r\n      return easingEffects.easeInBounce(t * 2) * 0.5\r\n    }\r\n    return easingEffects.easeOutBounce(t * 2 - 1) * 0.5 + 1 * 0.5\r\n  }\r\n}"],"sourceRoot":""}